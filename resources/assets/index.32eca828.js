var Oe=Object.defineProperty;var he=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var _e=(l,p,A)=>p in l?Oe(l,p,{enumerable:!0,configurable:!0,writable:!0,value:A}):l[p]=A,ge=(l,p)=>{for(var A in p||(p={}))Ve.call(p,A)&&_e(l,A,p[A]);if(he)for(var A of he(p))Le.call(p,A)&&_e(l,A,p[A]);return l};import{_ as $e,b as Se,s as M,x as U,y as re,h as ve}from"./index.0a07f3fa.js";import{l as q}from"./lodash.c9cf1bdb.js";import"./vue.db505ee4.js";import{d as ze}from"./vuedraggable.e7e6f001.js";import{d as Ne,q as Be,r as Fe,a as Pe,p as Ue,n as qe,t as We,aW as g,aR as v,ar as w,bd as i,c as a,as as D,au as u,at as O,aV as X,R as V,af as le,S as R,ai as k,H as Y,ah as je,U as Ge,aT as He,aS as Ke}from"./@vue.cb43a243.js";import{m as Je,M as Me}from"./ant-design-vue.6b10f349.js";import"./js-md5.5179c6be.js";import"./@babel.6cd0804c.js";import"./regenerator-runtime.8e24db72.js";import"./vue-router.a08742b9.js";import"./js-cookie.31874410.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.952f4739.js";import"./vue-demi.5fb18120.js";import"./axios.e3200588.js";import"./@ant-design.bcfb08ae.js";import"./@ctrl.fa7cbd46.js";/* empty css                     */import"./dayjs.38e390ea.js";import"./sortablejs.412b554c.js";import"./clipboard.099d05c9.js";import"./markdown-it.80c3a67b.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.c97a8414.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.86f7507c.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";const Qe=Ne({name:"ExCurd",components:{draggable:ze},setup(l,p){const A=Se(),e=Be({tables:[],searchTable:"",controller:[],controllerIndex:-1,method:[],methodIndex:-1,drawingMain:{component:null,ref:null},componentList:[],controllerForm:null,controllerEditForm:null,methodForm:null,methodEditForm:null,settingForm:null,settingFormList:[],settingFormVisible:!0,tableVisible:!1,tableModalRender:null,tableTreeNode:null,tableModalTitle:null,index:-1,database:null,isSave:!0,methodTypes:[{value:"grid",label:"\u6570\u636E\u8868\u683C(grid)"},{value:"form",label:"\u8868\u5355(form)"},{value:"detail",label:"\u8BE6\u60C5(detail)"}]}),ce=Fe(),ue=Fe();Z(),addEventListener("keydown",L),addEventListener("keyup",j),Pe(()=>{removeEventListener("keydown",L),removeEventListener("keyup",j)});const W=Ue(()=>e.tables.filter(t=>t.name.indexOf(e.searchTable)>-1||t.comment.indexOf(e.searchTable)>-1));let C=0,T=0;function L(t){t.keyCode==17&&(C=1),t.keyCode==83&&(T=1),C==1&&T==1&&te()}function j(t){t.keyCode==17&&(C=0),t.keyCode==83&&(T=0)}function z(){G()}function Z(){Q(),S(),M("ex-admin/plugin-curd-controller-Index/getFormComponent").then(t=>{e.componentList=t.data})}function N(t){["ExForm","ARow","ACol","ExFormMany","ATabPane"].indexOf(t.name)>-1&&!t.content.default&&(t.content.default=[]);for(let n in t.content){let o=t.content,d=[];o[n].forEach(s=>{d.push(s),N(s)}),["ExForm","ARow","ACol","ExFormMany","ATabPane"].indexOf(t.name)>-1&&(n=="default"?t.content[n]=I(t.name,d,t):t.content[n]=d)}}function ee(t){return y(t,!0)}function y(t,n=!1){let o;return n?o=t.draggedContext.element.component.name:o=t.draggedContext.element.name,!(o=="ACol"&&t.relatedContext.component.$attrs.group.name!="ARow"||o!="ACol"&&t.relatedContext.component.$attrs.group.name=="ARow")}function I(t,n,o={}){let d="ex-drag-container";return t=="ARow"?d+=" curd-children-row":t=="ACol"&&(d+=" curd-row-draggable"),[{name:"DraggableRender",attribute:{group:{name:t,put:!0,pull:!0},animation:1e3,chosenClass:"ex-drag-choose",list:n,tag:t=="ARow"?"render":"div",componentData:{data:o},class:d,style:{width:"100%",minHeight:"32px"},move:s=>y(s)},event:{End:s=>{fe()},Sort:s=>{e.drawingMain.ref.forceUpdate()},Choose:s=>{document.querySelectorAll("[data-choose]").forEach(_=>{_.removeAttribute("data-choose")}),s.item.setAttribute("data-choose",!0);let r=s.item.__draggable_context.element;r.name==="AFormItem"?e.settingForm=r.content.default[0].attribute.drawingForm:r.name=="DraggableRender"?e.settingForm=r.attribute.componentData.data.attribute.drawingForm:e.settingForm=r.attribute.drawingForm}}}]}const G=q.exports.debounce(K,150);function $(t,n,o,d,s,r,_){t.forEach(m=>{if(m.name=="AFormItem"){if(m.attribute&&m.attribute.name.indexOf("default")>-1){let x=n[m.content.default[0].bindAttribute.value.replace(d+".","")];x===void 0&&(x=n[o[r]]),n[o[r]]=x,o.default=n[o[r]],m.content.default[0].bindAttribute.value=_,m.content.default[0].modelBind.value=_}else if(s.name==="ARangePicker"&&m.attribute.title==="\u9ED8\u8BA4\u503C"){n[o[r]]=n[m.content.default[0].bindAttribute.value.replace(d+".","")],o.default=n[o[r]],m.content.default[0].bindAttribute.value=_,m.content.default[0].modelBind.value=_;const x=s.attribute.startField;s.attribute.startField=d+"."+x.substr(x.indexOf(".")+1);const h=s.attribute.endField;s.attribute.endField=d+"."+h.substr(h.indexOf(".")+1)}}else m.content&&m.content.default&&$(m.content.default,n,o,d,s,r,_)})}function H(t,n=null){t.forEach(o=>{if(typeof o=="object"){if(o.name=="AFormItem"){const d=e.drawingMain.component,s=d.bindAttribute.model,r=d.bind[s];let _=o,m=_.content.default[0],x=m.attribute.drawingForm,h=x.bind[x.bindAttribute.model];for(let b in h)if(b=="title"&&m.name!="ExFormMany")_.attribute.label=h[b];else if(!(["name","default"].indexOf(b)>-1))if(b=="required")_.attribute.required=h[b];else if(b=="field"&&m.name!="ACascader"){let F=s+"."+h[b];n=="ExFormMany"&&(F=h[b]),m.bindAttribute[h.modelValue]=F,m.modelBind[h.modelValue]=F,_.attribute.name=[h[b]],m.name=="ExFormMany"&&r[h[b]]===void 0&&(r[h[b]]=h.default),$(x.content.default,r,h,s,m,b,F)}else if(["character","addonBefore","addonAfter","prefix","suffix"].indexOf(b)>-1&&h[b]){let F=Ge(h[b]);Array.isArray(F)?m.content[b]=F:m.content[b]=[F]}else if(b==="config"){for(let F in h[b])F=="options"&&h[b].options_type==3&&(m.attribute.options=[],Object.assign(m.attribute.options,h[b][F]));if(m.name=="ExSelectTable"){let F="ex-admin/"+h[b].grid_class.replaceAll("\\","-")+"/"+h[b].grid_method,be={};h[b].params.forEach(pe=>{be[pe.var]=pe.value}),U(m.attribute,"gridUrl",F),U(m.attribute,"params",be)}}else U(m.attribute,b,h[b])}else if(o.name=="DraggableRender")o.attribute.key=re(20),H(o.attribute.list,o.attribute.group.name);else if(o.name=="ARow"||o.name=="ACol"){let d=o.attribute.drawingForm,s=d.bind[d.bindAttribute.model];delete o.attribute.md,delete o.attribute.sm,delete o.attribute.xs;for(let r in s)U(o.attribute,r,s[r])}else if(o.name=="ATabs"){let d=o.attribute.drawingForm,s=d.bind[d.bindAttribute.model],r=[],_;s.pane.forEach((x,h)=>{let b=q.exports.cloneDeep(o.content.default[h]);if(b)_=b;else{let F=[];b=q.exports.cloneDeep(_),b.attribute.key=h+1,b.content={default:I("ATabPane",F)}}b.attribute.tab=x.title,r.push(b);for(let F in s)U(o.attribute,F,s[F])}),o.content.default=r;let m=d.bindAttribute.model+"."+s.modelValue;o.bindAttribute.activeKey=m,o.modelBind.activeKey=m}else if(o.name=="ADivider"){let d=o.attribute.drawingForm,s=d.bind[d.bindAttribute.model];for(let r in s)r=="title"?o.content={default:[s[r]]}:U(o.attribute,r,s[r])}o.content&&o.content.default&&H(o.content.default)}})}function K(){const t=e.drawingMain.component;let n=t.attribute.drawingForm,o=n.bind[n.bindAttribute.model];if(t.name=="ExForm")Object.assign(t.attribute,o),t.content.default||(t.content.default=[]),H(t.content.default);else if(t.name=="ExGrid"){const d=[];for(let s in o)s=="columns"?(o[s].forEach(r=>{d.push({dataIndex:r.field,title:r.label,type:r.form_type||"",header:{name:"html",attribute:{class:"ex_admin_table_th_name","data-tag":"span"},content:{default:[r.label]}}})}),o.switch.indexOf("hideAction")==-1&&d.push({dataIndex:"ExAdminAction",title:"",header:{name:"html",attribute:{class:"ex_admin_table_th_name","data-tag":"span"},content:{default:[""]}}}),t.attribute.columns=d):s=="switch"?o.swtichOptions.forEach(r=>{t.attribute[r]=o[s].indexOf(r)>-1}):t.attribute[s]=o[s]}else if(t.name=="ADescriptions")for(let d in o)if(d=="items"){const s=[];o[d].forEach(r=>{var _;s.push({name:"ADescriptionsItem",attribute:{title:r.label,span:r.span},content:{default:[(_=t.attribute.data[r.field])!=null?_:"--"],label:[r.label]}})}),t.content.default=s}else t.attribute[d]=o[d];e.drawingMain.ref.forceUpdate(),e.isSave=!1}function B(t,n){t.forEach(o=>{let d;if(typeof o=="object"){if(o.name=="AFormItem"){const s=e.drawingMain.component;let r=o.content.default[0].attribute.drawingForm;e.settingFormList.push(r);let _=r.bindAttribute.model;ve(r.bind[_],r.attribute.exceptField||[]);const m=s.bindAttribute.model,x=s.bind[m];r.bind[_].default=x[r.bind[_].field],n.push(r.bind[_]),d=r.bind[_]}else if(o.name=="DraggableRender")B(o.attribute.list,n);else if(["ARow","ACol","ExFormMany","ATabs","ATabPane","ADivider"].indexOf(o.name)>-1){let s=o.attribute.drawingForm,r=s.bindAttribute.model;ve(s.bind[r],s.attribute.exceptField||[]),n.push(s.bind[r]),d=s.bind[r]}o.content&&o.content.default&&d&&(d.content=[],B(o.content.default,d.content))}})}function te(){e.settingFormList=[],G(),setTimeout(()=>{let t={};const n=e.drawingMain.component;let o=n.attribute.drawingForm.bindAttribute.model;if(t.config=n.attribute.drawingForm.bind[o],n.name=="ExForm"){t.type="form",t.component=[],B(n.content.default,t.component);let d=0;qe(()=>{e.settingFormList.forEach(s=>{A[s.bindAttribute.ref].form.validate().then(()=>{d++,d==e.settingFormList.length&&J(t)}).catch(r=>{r.errorFields.forEach(_=>{let m=`\u3010${r.values.title}\u3011`||"\u3010\u3011";Je.error(m+_.errors[0]),e.settingFormList=[]})})})})}else n.name=="ExGrid"?(t.type="grid",J(t)):n.name=="ADescriptions"&&(t.type="detail",J(t))},500)}function J(t){M({url:"ex-admin/plugin-curd-controller-Index/save",method:"post",data:{id:e.method[e.methodIndex].id,controller:e.controller[e.controllerIndex].name,class:e.controller[e.controllerIndex].class,function:e.method[e.methodIndex].name,setting:t}}).then(n=>{e.settingFormList=[],me(e.methodIndex,!1),e.isSave=!0})}function ae(t){e.drawingMain.ref=t}function Q(){M("ex-admin/plugin-curd-controller-Index/getController?curd_ref="+p.attrs.curd_ref).then(t=>{e.controller=t.data.list,e.controllerForm=t.data.controllerForm})}function S(){M("ex-admin/plugin-curd-controller-Database/getTable").then(t=>{e.tables=t.data.map(n=>(n.tableName=n.name,n.dataRef=n,n.name=n.id,n.children=[],n.class="table-tree-node",n))})}function ne(t){if(e.tableVisible=!1,!t){S();return}return new Promise(n=>{M("ex-admin/plugin-curd-controller-Database/getTableColumn?table="+t.dataRef.id).then(o=>{t.dataRef.children=o.data.map(d=>(d.id=t.id+d.field,d.name=d.field,d.table=t.id,d.parent=t,d.isLeaf=!0,d)),e.tables=[...e.tables],n()})})}function P(t){Me.confirm({title:"\u5220\u9664\u8868",content:"\u786E\u8BA4\u5220\u9664\u8868\uFF0C\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){M.delete("/ex-admin/plugin-curd-controller-Database/grid",{data:{ex_admin_action:"delete",ex_admin_sidebar:!0,ids:[t]}}).then(n=>{S()})}})}function oe(t,n,o){Me.confirm({title:"\u5220\u9664\u8868\u5B57\u6BB5",content:"\u786E\u8BA4\u5220\u9664\u8868\u5B57\u6BB5\uFF0C\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){M.delete("/ex-admin/plugin-curd-controller-Database/grid",{data:{ex_admin_action:"delete",ex_admin_trashed:"false",table:t,ids:[n]}}).then(d=>{ne(o)})}})}function de(t,n,o){e.tableTreeNode=o,e.tableModalTitle="\u7F16\u8F91\u5B57\u6BB5",e.tableModalRender=null,M.put("/ex-admin/plugin-curd-controller-Database/form",{table:t,field:n}).then(d=>{e.tableVisible=!0,e.tableModalRender=d,e.tableModalRender.footer=d.content.footer[0],delete e.tableModalRender.content.footer})}function ie(){e.tableTreeNode=null,e.tableModalTitle="\u6DFB\u52A0\u8868",e.tableModalRender=null,M.post("/ex-admin/plugin-curd-controller-Database/tableForm").then(t=>{e.tableVisible=!0,e.tableModalRender=t,e.tableModalRender.footer=t.content.footer[0],delete e.tableModalRender.content.footer})}function c(){e.tableTreeNode=null,e.tableModalTitle="\u8868\u9884\u8BBE\u5B57\u6BB5",e.tableModalRender=null,M.post("/ex-admin/plugin-curd-controller-Database/presetFields").then(t=>{e.tableVisible=!0,e.tableModalRender=t,e.tableModalRender.footer=t.content.footer[0],delete e.tableModalRender.content.footer})}function f(t){e.tableTreeNode=null,e.tableModalTitle="\u7F16\u8F91\u8868",e.tableModalRender=null,M.post("/ex-admin/plugin-curd-controller-Database/tableForm",{id:t}).then(n=>{e.tableVisible=!0,e.tableModalRender=n,e.tableModalRender.footer=n.content.footer[0],delete e.tableModalRender.content.footer})}function E(t){e.tableModalTitle="\u5173\u8054\u8868(\u6A21\u578B)",e.tableModalRender=null,M.post("/ex-admin/plugin-curd-controller-Database/modelRelationForm",{table:t}).then(n=>{e.tableVisible=!0,e.tableModalRender=n,e.tableModalRender.footer=n.content.footer[0],delete e.tableModalRender.content.footer})}function ye(t){e.tableModalTitle="\u6DFB\u52A0\u8868\u5B57\u6BB5",e.tableModalRender=null,M.post("/ex-admin/plugin-curd-controller-Database/form",{table:t}).then(n=>{e.tableVisible=!0,e.tableModalRender=n,e.tableModalRender.footer=n.content.footer[0],delete e.tableModalRender.content.footer})}function Ce(){e.methodIndex=-1,M({url:"ex-admin/plugin-curd-controller-Index/getMethod",method:"post",data:{curd_ref:p.attrs.curd_ref,class:e.controller[e.controllerIndex].class,controller:e.controller[e.controllerIndex].name,table:e.controller[e.controllerIndex].table,id:e.controller[e.controllerIndex].id}}).then(t=>{e.methodForm=t.data.methodForm,e.method=t.data.list})}function xe(){M({url:"ex-admin/plugin-curd-controller-Index/deleteMethod",method:"post",data:{class:e.controller[e.controllerIndex].class,controller:e.controller[e.controllerIndex].name,method:e.method[e.methodIndex].name,id:e.method[e.methodIndex].id}}).then(t=>{e.methodIndex=-1,e.method.splice(e.methodIndex,1)})}function ke(){const t=e.controller[e.controllerIndex];M({url:"ex-admin/plugin-curd-controller-Index/deleteController",method:"post",data:{id:t.id,path:t.path}}).then(n=>{e.controllerIndex=-1,Q(),e.method=[]})}function me(t,n=!0){e.methodIndex=t,e.settingForm=null,M({url:"ex-admin/plugin-curd-controller-Index/render",method:"post",data:{class:e.controller[e.controllerIndex].class,function:e.method[e.methodIndex].name,var:[]}}).then(o=>{e.isSave=!0,N(o.data),e.drawingMain.component=o.data})}function Re(t,n){n.mouseenter=!0,e.tableTreeNode=n,e.tables=[...e.tables]}function Ae(t,n){n.mouseenter=!1,e.tables=[...e.tables]}function we(t){t.newIndex!==t.oldIndex&&M.post("ex-admin/plugin-curd-controller-Database/sortField",{table:t.item.__draggable_context.element.table,field:t.item.__draggable_context.element.field,sort:t.newIndex})}function Ie(t){if(!t.component)return!1;let n=q.exports.cloneDeep(t.component);if(n.name=="AFormItem"){let d=n.content.default[0].attribute.drawingForm,s=d.bind[d.bindAttribute.model];if(d.attribute.key=re(20),s.field||(s.field=re(20)),n.attribute.validateFormField=e.drawingMain.component.bindAttribute.validateField,n.content.default[0].name=="ExFormMany"){let r=[];n.content.default[0].content={default:I(n.content.default[0].name,r,n.content.default[0])}}}let o=[];if(n.name=="ARow"){let d=[];n.content.default[0].content={default:I("ACol",d)},o=n.content.default,n.content={default:I(n.name,o,n)}}else if(n.name=="ACol")n.content={default:I(n.name,o,n)};else if(n.name=="ATabs"){let d=n.content.default[0];d.content={default:I("ATabPane",o,d)},n.content={default:[d]}}return n}function fe(t){K()}function Te(t){return!(t.relatedContext.element&&!t.relatedContext.element.table&&!t.draggedContext.element.component)}function Ee(t){if(t){const n=e.controller[e.controllerIndex];e.controllerEditForm=q.exports.cloneDeep(e.controllerForm);let o=e.controllerEditForm.content.content[0].attribute.params;o.id=n.id,o.class=n.class,o.path=n.path,o.title=n.title,o.name=n.name,o.table=n.table}}function De(t){if(t){const n=e.method[e.methodIndex];e.methodEditForm=q.exports.cloneDeep(e.methodForm);let o=e.methodEditForm.content.content[0].attribute.params;o.id=n.id,o.type=n.type,o.name=n.name,o.oldTitle=n.title}}return ge({onFieldMove:Te,onMove:y,onCloneMove:ee,onEnd:fe,onClone:Ie,relationTable:E,onFieldSort:we,addTable:ie,presetFields:c,editTableField:de,editTable:f,deleteTable:P,addTableField:ye,tableMouseLeave:Ae,tableMouseenter:Re,onLoadTable:ne,deleteTableField:oe,getController:Q,watchModel:z,dragSave:te,getRender:me,getMethod:Ce,deleteMethod:xe,deleteController:ke,getTable:S,controllerFormVisible:Ee,methodFormVisible:De,dragRef:ce,drawingRef:ue,setRef:ae,tableMenus:W},We(e))}}),se=l=>(He("data-v-1757f12e"),l=l(),Ke(),l),Xe=R(" \u6DFB\u52A0 "),Ye=R(" \u7F16\u8F91 "),Ze=R(" \u5220\u9664 "),et={class:"flex-column"},tt={class:"title"},nt=se(()=>u("span",null,"\u63A7\u5236\u5668",-1)),ot={class:"flex-1-auto"},lt=["onContextmenu","onClick"],at={class:"name"},dt={class:"desc"},it=R(" \u6DFB\u52A0 "),rt=R(" \u7F16\u8F91 "),st=R(" \u5220\u9664 "),ct={class:"flex-column"},ut={class:"title"},mt=se(()=>u("span",null,"\u65B9\u6CD5",-1)),ft={class:"flex-1-auto"},bt=["onContextmenu","onClick"],pt={class:"name"},ht={class:"desc"},_t={class:"flex-column"},gt={style:{margin:"0 10px 10px 10px"}},vt=R("\u6DFB\u52A0\u8868"),Ft=R("\u8868\u9884\u8BBE\u5B57\u6BB5"),Mt=["onMouseenter","onMouseleave"],yt={class:"table-tree-title"},Ct=["title"],xt={key:0,class:"table-tree-action-table"},kt=["title"],Rt=["onMouseenter","onMouseleave"],At={class:"table-tree-title"},wt=["title"],It={key:0,class:"table-tree-action"},Tt=["title"],Et={class:"components"},Dt={style:{display:"flex","align-items":"center",margin:"5px"}},Ot=se(()=>u("i",{class:"fas fa-layer-group"},null,-1)),Vt={style:{"margin-left":"5px"}},Lt={class:"components-draggable"},$t={class:"components-item"},St={class:"components-body"},zt={class:"header"},Nt=R("(ctrl+s)"),Bt={class:"drawing scrollbar",ref:"drawingRef"},Pt={style:{display:"none"}};function Ut(l,p,A,e,ce,ue){const W=g("PlusOutlined"),C=g("render"),T=g("a-menu-item"),L=g("EditOutlined"),j=g("question-circle-outlined"),z=g("DeleteOutlined"),Z=g("a-popconfirm"),N=g("a-menu"),ee=g("ReloadOutlined"),y=g("a-button"),I=g("a-tooltip"),G=g("a-dropdown"),$=g("a-layout-sider"),H=g("a-modal"),K=g("reload-outlined"),B=g("a-space"),te=g("a-input"),J=g("FolderOutlined"),ae=g("NodeIndexOutlined"),Q=g("FileOutlined"),S=g("draggable"),ne=g("a-sub-menu"),P=g("a-tab-pane"),oe=g("a-tabs"),de=g("a-layout-content"),ie=g("a-layout");return v(),w(ie,{class:"layout"},{default:i(()=>[a($,{width:130,class:"controller scrollbar"},{default:i(()=>[a(G,{trigger:["contextmenu"],onVisibleChange:l.controllerFormVisible},{overlay:i(()=>[a(N,null,{default:i(()=>[a(T,null,{default:i(()=>[a(C,{data:l.controllerEditForm},{default:i(()=>[a(W),Xe]),_:1},8,["data"])]),_:1}),l.controllerIndex>-1?(v(),w(T,{key:0},{default:i(()=>[a(C,{data:l.controllerEditForm},{default:i(()=>[a(L),Ye]),_:1},8,["data"])]),_:1})):D("",!0),l.controllerIndex>-1?(v(),w(Z,{key:1,title:"\u786E\u8BA4\u5220\u9664\uFF1F",onConfirm:p[0]||(p[0]=c=>l.deleteController())},{icon:i(()=>[a(j,{style:{color:"red"}})]),default:i(()=>[a(T,null,{icon:i(()=>[a(z)]),default:i(()=>[Ze]),_:1})]),_:1})):D("",!0)]),_:1})]),default:i(()=>[u("div",et,[u("div",tt,[nt,u("div",null,[a(C,{data:l.controllerForm},null,8,["data"]),a(y,{size:"small",shape:"circle",onClick:l.getController},{icon:i(()=>[a(ee)]),_:1},8,["onClick"])])]),u("ul",ot,[(v(!0),O(Y,null,X(l.controller,(c,f)=>(v(),O("li",{key:f,onContextmenu:V(E=>l.controllerIndex=f,["prevent"]),onClick:E=>{l.controllerIndex=f,l.getMethod()},class:le(l.controllerIndex==f?"active":"")},[a(I,{placement:"bottom",mouseEnterDelay:1},{title:i(()=>[R(k(c.title),1)]),default:i(()=>[u("div",at,k(c.title),1)]),_:2},1024),a(I,{placement:"bottom",mouseEnterDelay:1},{title:i(()=>[R(k(c.path),1)]),default:i(()=>[u("div",dt,k(c.name),1)]),_:2},1024)],42,lt))),128))])])]),_:1},8,["onVisibleChange"])]),_:1}),a($,{width:130,class:"controller scrollbar"},{default:i(()=>[a(G,{trigger:["contextmenu"],onVisibleChange:l.methodFormVisible},{overlay:i(()=>[a(N,null,{default:i(()=>[l.controllerIndex>-1?(v(),w(T,{key:0},{default:i(()=>[a(C,{data:l.methodForm},{default:i(()=>[a(W),it]),_:1},8,["data"])]),_:1})):D("",!0),l.methodIndex>-1?(v(),w(T,{key:1},{default:i(()=>[a(C,{data:l.methodEditForm},{default:i(()=>[a(L),rt]),_:1},8,["data"])]),_:1})):D("",!0),l.methodIndex>-1?(v(),w(Z,{key:2,title:"\u786E\u8BA4\u5220\u9664\uFF1F",onConfirm:p[1]||(p[1]=c=>l.deleteMethod())},{icon:i(()=>[a(j,{style:{color:"red"}})]),default:i(()=>[a(T,null,{icon:i(()=>[a(z)]),default:i(()=>[st]),_:1})]),_:1})):D("",!0)]),_:1})]),default:i(()=>[u("div",ct,[u("div",ut,[mt,u("div",null,[a(C,{disabled:l.controllerIndex==-1,data:l.methodForm},null,8,["disabled","data"]),a(y,{size:"small",shape:"circle",onClick:p[2]||(p[2]=c=>l.getMethod())},{icon:i(()=>[a(ee)]),_:1})])]),u("ul",ft,[(v(!0),O(Y,null,X(l.method,(c,f)=>(v(),O("li",{key:f,onContextmenu:V(E=>l.methodIndex=f,["prevent"]),onClick:E=>l.getRender(f),class:le(l.methodIndex==f?"active":"")},[a(I,{placement:"bottom",mouseEnterDelay:1},{title:i(()=>[R(k(c.title),1)]),default:i(()=>[u("div",pt,k(c.title),1)]),_:2},1024),a(I,{placement:"bottom",mouseEnterDelay:1},{title:i(()=>[R(k(c.name),1)]),default:i(()=>[u("div",ht,k(c.name),1)]),_:2},1024)],42,bt))),128))])])]),_:1},8,["onVisibleChange"])]),_:1}),a($,{width:300,class:"scrollbar",ref:"dragRef"},{default:i(()=>[a(oe,{type:"card",class:"curd-tabs"},{default:i(()=>[a(P,{key:"1",tab:"\u6570\u636E\u5E93",style:{height:"100%"}},{default:i(()=>[a(H,{visible:l.tableVisible,"onUpdate:visible":p[4]||(p[4]=c=>l.tableVisible=c),title:l.tableModalTitle,width:"1000px"},{footer:i(()=>[l.tableModalRender?(v(),w(C,{key:0,data:l.tableModalRender.footer},null,8,["data"])):D("",!0)]),default:i(()=>[a(C,{data:l.tableModalRender,onSuccess:p[3]||(p[3]=c=>l.onLoadTable(l.tableTreeNode))},null,8,["data"])]),_:1},8,["visible","title"]),u("div",_t,[u("div",gt,[a(B,{style:{"margin-bottom":"10px"}},{default:i(()=>[a(y,{onClick:l.addTable},{default:i(()=>[vt]),_:1},8,["onClick"]),a(y,{onClick:l.presetFields},{default:i(()=>[Ft]),_:1},8,["onClick"]),a(y,{shape:"circle",size:"small",onClick:l.getTable},{icon:i(()=>[a(K)]),_:1},8,["onClick"])]),_:1}),a(te,{value:l.searchTable,"onUpdate:value":p[5]||(p[5]=c=>l.searchTable=c),size:"small",placeholder:"\u641C\u7D22\u8868","allow-clear":""},null,8,["value"])]),a(N,{mode:"inline",class:"curd-table-tree",selectable:!1},{default:i(()=>[(v(!0),O(Y,null,X(l.tableMenus,c=>(v(),w(ne,{key:c.id,onTitleClick:f=>l.onLoadTable(c)},{title:i(()=>[u("div",{onMouseenter:f=>l.tableMouseenter(f,c),onMouseleave:f=>l.tableMouseLeave(f,c)},[u("div",yt,[a(J),u("div",{class:"field-title",title:c.name},k(c.name),9,Ct),c.mouseenter?(v(),O("div",xt,[a(y,{shape:"circle",size:"small",onClick:V(f=>l.onLoadTable(c),["stop"])},{icon:i(()=>[a(K)]),_:2},1032,["onClick"]),a(y,{shape:"circle",size:"small",onClick:V(f=>l.addTableField(c.id),["stop"])},{icon:i(()=>[a(W)]),_:2},1032,["onClick"]),a(y,{shape:"circle",size:"small",onClick:V(f=>l.editTable(c.id),["stop"])},{icon:i(()=>[a(L)]),_:2},1032,["onClick"]),a(y,{shape:"circle",size:"small",onClick:V(f=>l.relationTable(c.id),["stop"])},{icon:i(()=>[a(ae)]),_:2},1032,["onClick"]),a(y,{shape:"circle",size:"small",onClick:V(f=>l.deleteTable(c.id),["stop"])},{icon:i(()=>[a(z)]),_:2},1032,["onClick"])])):D("",!0)]),u("div",{class:"field-title-desc",title:c.comment},k(c.comment),9,kt)],40,Mt)]),default:i(()=>[a(S,{style:{width:"100%"},list:c.children,onSort:l.onFieldSort,clone:l.onClone,move:l.onFieldMove,onEnd:l.onEnd,group:{pull:"clone",put:!1},"item-key":"id"},{item:i(({element:f})=>[u("div",{onMouseenter:E=>l.tableMouseenter(E,f),onMouseleave:E=>l.tableMouseLeave(E,f)},[(v(),w(T,{key:f.id},{default:i(()=>[u("div",At,[a(Q),u("div",{class:"field-title",title:f.name},k(f.name),9,wt),f.mouseenter?(v(),O("div",It,[a(y,{shape:"circle",size:"small",onClick:V(E=>l.editTableField(c.id,f.field,c),["stop"])},{icon:i(()=>[a(L)]),_:2},1032,["onClick"]),a(y,{shape:"circle",size:"small",onClick:V(E=>l.deleteTableField(c.id,f.field,c),["stop"])},{icon:i(()=>[a(z)]),_:2},1032,["onClick"])])):D("",!0)]),u("div",{class:"field-title-desc",title:f.comment},k(f.comment),9,Tt)]),_:2},1024))],40,Rt)]),_:2},1032,["list","onSort","clone","move","onEnd"])]),_:2},1032,["onTitleClick"]))),128))]),_:1})])]),_:1}),a(P,{key:"2",tab:"\u8868\u5355\u8BBE\u8BA1",forceRender:""},{default:i(()=>[(v(!0),O(Y,null,X(l.componentList,c=>(v(),O("div",Et,[u("div",Dt,[Ot,u("div",Vt,k(c.label),1)]),u("div",Lt,[a(S,{list:c.options,sort:!1,clone:l.onClone,onEnd:l.onEnd,move:l.onCloneMove,"chosen-class":"chosen-class",group:{name:"components",pull:"clone",put:!1}},{item:i(({element:f})=>[u("div",$t,[u("div",St,[u("i",{class:le(f.icon)},null,2),R(" "+k(f.label),1)])])]),_:2},1032,["list","clone","onEnd","move"])])]))),256))]),_:1})]),_:1})]),_:1},512),a(de,{class:"main"},{default:i(()=>[u("div",zt,[a(B,null,{default:i(()=>[a(y,{onClick:l.dragSave},{default:i(()=>[u("span",{style:je(l.isSave?"":"color: red;")},"\u4FDD\u5B58",4),Nt]),_:1},8,["onClick"])]),_:1})]),u("div",Bt,[a(C,{ref:c=>l.setRef(c),data:l.drawingMain.component},null,8,["data"])],512)]),_:1}),u("div",{class:"collapse",onClick:p[6]||(p[6]=c=>l.settingFormVisible=!l.settingFormVisible)},[u("i",{class:le(l.settingFormVisible?"fas fa-angle-double-right":"fas fa-angle-double-left")},null,2)]),l.settingFormVisible?(v(),w($,{key:0,width:360,class:"settingForm scrollbar"},{default:i(()=>[a(oe,{type:"card",class:"curd-tabs"},{default:i(()=>[l.settingForm?(v(),w(P,{key:"1",tab:"\u7EC4\u4EF6\u5C5E\u6027"},{default:i(()=>[a(C,{data:l.settingForm,onWatchModel:l.watchModel},null,8,["data","onWatchModel"])]),_:1})):D("",!0),a(P,{key:"2",tab:"\u5C5E\u6027",forceRender:""},{default:i(()=>[l.drawingMain.component?(v(),w(C,{key:0,data:l.drawingMain.component.attribute.drawingForm,onWatchModel:l.watchModel},null,8,["data","onWatchModel"])):D("",!0)]),_:1})]),_:1})]),_:1})):D("",!0),u("div",Pt,[(v(!0),O(Y,null,X(l.settingFormList,c=>(v(),w(C,{data:c,onWatchModel:l.watchModel},null,8,["data","onWatchModel"]))),256))])]),_:1})}var On=$e(Qe,[["render",Ut],["__scopeId","data-v-1757f12e"]]);export{On as default};

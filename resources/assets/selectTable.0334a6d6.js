import{_ as w,t as P}from"./index.74ec82ca.js";import"./vue.db505ee4.js";import{u as O}from"./use-http.d82bd466.js";import{d as j,r as n,w as V,aW as u,aR as f,at as b,c as a,bd as s,S,ai as p,aM as B,au as $,as as N,af as A,H as E}from"./@vue.cb43a243.js";import"./js-md5.5179c6be.js";import"./@babel.6cd0804c.js";import"./regenerator-runtime.8e24db72.js";import"./vue-router.a08742b9.js";import"./js-cookie.31874410.js";import"./ant-design-vue.6b10f349.js";import"./@ant-design.bcfb08ae.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.38e390ea.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.c9cf1bdb.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.81e70e6d.js";import"./vue-demi.5fb18120.js";import"./axios.e3200588.js";/* empty css                     */import"./sortablejs.412b554c.js";import"./clipboard.099d05c9.js";import"./markdown-it.80c3a67b.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.c97a8414.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.86f7507c.js";const H=j({name:"ExSelectTable",props:{value:[String,Array,Number],params:Object,gridUrl:String,submitUrl:String,remoteParams:{type:Object,default:{}},submitParams:{type:Object,default:{}},custom:Boolean,multiple:Boolean},inheritAttrs:!1,emits:["update:value"],setup(e,l){const g=n(!0),r=n(e.value),d=n(!1),y=n([]),c=n(null),t=n(e.value||[]),m=n("");Array.isArray(t.value)||(t.value=[t.value]);const{loading:_,http:h}=O(),k={x:"max-content",y:window.innerHeight/2};e.submitUrl&&T(),V(()=>e.value,o=>{r.value=o}),V(r,o=>{e.multiple?t.value=o:o?t.value=[o]:t.value=[],l.emit("update:value",o)});function i(){e.gridUrl&&(m.value=null,d.value=!0,h({url:e.gridUrl,method:"POST",data:e.params}).then(o=>{Object.assign(o.attribute.params,e.params),m.value=o}))}function T(){const{http:o}=O();o({url:e.submitUrl,method:"POST",data:Object.assign(e.submitParams,{ex_eadmin_select_id:t.value})}).then(U=>{e.custom?c.value=U.data:y.value=U.data,d.value=!1;const C=[];if(t.value.forEach(v=>{C.push(v)}),e.multiple)r.value=C;else{let v=C.pop();typeof v!="undefined"&&(r.value=v)}}).finally(()=>{g.value=!1})}return{trans:P,selectLoading:g,loading:_,submit:T,open:i,content:m,options:y,selectValue:r,selection:t,visible:d,height:k,customRender:c}}}),R={key:0},z={key:1},D={key:0};function F(e,l,g,r,d,y){const c=u("plus-outlined"),t=u("a-button"),m=u("render"),_=u("a-select"),h=u("a-form-item-rest"),k=u("a-modal");return f(),b(E,null,[e.custom?(f(),b("div",R,[a(t,{size:"small",style:{margin:"5px 0"},onClick:e.open,disabled:e.$attrs.disabled},{icon:s(()=>[a(c)]),default:s(()=>[S(" "+p(e.trans("SelectTable.select")),1)]),_:1},8,["onClick","disabled"]),a(m,{data:e.customRender},null,8,["data"])])):(f(),b("div",z,[a(_,B(e.$attrs,{value:e.selectValue,"onUpdate:value":l[0]||(l[0]=i=>e.selectValue=i),options:e.options,open:!1,onClick:e.open}),null,16,["value","options","onClick"])])),a(k,{visible:e.visible,"onUpdate:visible":l[3]||(l[3]=i=>e.visible=i),width:"80%",destroyOnClose:"",bodyStyle:{padding:0,paddingTop:"40px"}},{footer:s(()=>[$("div",{class:A(e.multiple&&e.selection.length>0?"footer":"")},[e.multiple&&e.selection.length>0?(f(),b("div",D,p(e.trans("SelectTable.selected"))+": "+p(e.selection.length),1)):N("",!0),$("div",null,[a(t,{type:"primary",onClick:e.submit},{default:s(()=>[S(p(e.trans("SelectTable.confirm")),1)]),_:1},8,["onClick"]),a(t,{onClick:l[2]||(l[2]=i=>e.visible=!1)},{default:s(()=>[S(p(e.trans("SelectTable.cancel")),1)]),_:1})])],2)]),default:s(()=>[a(h,null,{default:s(()=>[a(m,{data:e.content,selection:e.selection,"onUpdate:selection":l[1]||(l[1]=i=>e.selection=i),scroll:e.height,"selection-type":e.multiple?"checkbox":"radio"},null,8,["data","selection","scroll","selection-type"])]),_:1})]),_:1},8,["visible"])],64)}var we=w(H,[["render",F],["__scopeId","data-v-148a233a"]]);export{we as default};

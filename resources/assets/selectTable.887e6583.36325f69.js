import{an as R,av as $,aw as w,a as d,G as A,v as O,e as z,X as T,ax as I,I as V,L as q,$ as m,h as v,j as h,P as _,i as o,y as s,k as g,l as c,O as G,W as j,J,z as D,n as E,m as L}from"./dynamicTag.98ddbc91.js";import"./vue.4c5758a0.js";import"./@babel.dd651e2b.js";import"./regenerator-runtime.8e24db72.js";import"./@vue.87afd1fa.js";import"./index.97f9c525.js";import"./js-md5.3cdd41c4.js";import"./vue-router.9a2c52dc.js";import"./js-cookie.31874410.js";import"./ant-design-vue.e954adc4.js";import"./@ant-design.8c82b126.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.0743a87f.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.28c974ad.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.67682d36.js";import"./vue-demi.24ed2461.js";import"./axios.e3200588.js";/* empty css                     */import"./sortablejs.412b554c.js";import"./clipboard.89482ba1.js";import"./markdown-it.39ce48f9.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.169105cf.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.52338b19.js";const W=R({name:"ExSelectTable",props:{value:[String,Array,Number],params:Object,gridUrl:String,submitUrl:String,remoteParams:{type:Object,default:{}},submitParams:{type:Object,default:{}},custom:Boolean,quick:Boolean,multiple:Boolean,gridRefresh:Boolean,modalRefresh:Boolean,gridBatch:Boolean},inheritAttrs:!1,emits:["update:value"],setup(t,a){const y=$(),S=w(),r=d(t.value),b=d(!1),f=d([]),n=d(null),l=d(t.value||[]),p=d("");Array.isArray(l.value)||(l.value=[l.value]);const C={x:"max-content",y:window.innerHeight/2};t.submitUrl&&!A(t.value)&&i(),O(()=>t.value,e=>{r.value=e}),O(r,e=>{t.multiple?l.value=e:e?l.value=[e]:l.value=[],a.emit("update:value",e),l.value.length>0&&k()});function U(){t.gridUrl&&(p.value=null,b.value=!0,T({url:t.gridUrl,method:"POST",data:t.params}).then(e=>{Object.assign(e.attribute.params,t.params),p.value=e}))}const k=z.exports.throttle(i,500,{trailing:!1});function i(){let e=Object.assign(t.submitParams,{ex_eadmin_select_id:l.value});S&&(e.data=S.submitData());let u=[];t.gridBatch&&(u=y.exposed.selectIds.value),t.submitUrl?T({url:t.submitUrl,method:"POST",data:e},t.gridBatch,u).then(x=>{if(t.quick){t.gridRefresh&&y.exposed.refresh(),t.modalRefresh&&I.modalRefresh(),b.value=!1;return}t.custom?n.value=x.data:f.value=x.data,B()}):B()}function B(){b.value=!1;const e=[];if(l.value.forEach(u=>{e.push(u)}),t.multiple)r.value=e;else{let u=e.pop();typeof u!="undefined"&&(r.value=u)}}function P(){t.multiple?r.value=[]:r.value=null}return{submit:i,clear:P,trans:V,throttleSubmit:k,open:U,content:p,options:f,selectValue:r,selection:l,visible:b,height:C,customRender:n}}}),H={key:0},K={class:"action"},M={key:2},N={key:0};function Q(t,a,y,S,r,b){const f=m("plus-outlined"),n=m("a-button"),l=m("delete-outlined"),p=m("render"),C=m("a-select"),U=m("a-form-item-rest"),k=m("a-modal");return v(),h(L,null,[t.custom?(v(),h("div",H,[_("div",K,[o(n,{size:"small",onClick:t.open,disabled:t.$attrs.disabled},{icon:s(()=>[o(f)]),default:s(()=>[g(" "+c(t.trans("SelectTable.select")),1)]),_:1},8,["onClick","disabled"]),t.selectValue?(v(),G(n,{key:0,size:"small",onClick:t.clear,disabled:t.$attrs.disabled},{icon:s(()=>[o(l)]),default:s(()=>[g(" "+c(t.trans("SelectTable.clear")),1)]),_:1},8,["onClick","disabled"])):j("",!0)]),o(p,{data:t.customRender},null,8,["data"])])):t.quick?(v(),h("span",{key:1,onClick:a[0]||(a[0]=(...i)=>t.open&&t.open(...i))},[J(t.$slots,"default",{},()=>[o(n,{size:"small",disabled:t.$attrs.disabled},{icon:s(()=>[o(f)]),default:s(()=>[g(" "+c(t.trans("SelectTable.select")),1)]),_:1},8,["disabled"])],!0)])):(v(),h("div",M,[o(C,D(t.$attrs,{value:t.selectValue,"onUpdate:value":a[1]||(a[1]=i=>t.selectValue=i),options:t.options,"allow-clear":"",open:!1,onClick:t.open}),null,16,["value","options","onClick"])])),o(k,{visible:t.visible,"onUpdate:visible":a[4]||(a[4]=i=>t.visible=i),width:"80%",destroyOnClose:""},{footer:s(()=>[_("div",{class:E(t.multiple&&t.selection.length>0?"footer":"")},[t.multiple&&t.selection.length>0?(v(),h("div",N,c(t.trans("SelectTable.selected"))+": "+c(t.selection.length),1)):j("",!0),_("div",null,[o(n,{type:"primary",onClick:t.throttleSubmit},{default:s(()=>[g(c(t.trans("SelectTable.confirm")),1)]),_:1},8,["onClick"]),o(n,{onClick:a[3]||(a[3]=i=>t.visible=!1)},{default:s(()=>[g(c(t.trans("SelectTable.cancel")),1)]),_:1})])],2)]),default:s(()=>[o(U,null,{default:s(()=>[o(p,{data:t.content,selection:t.selection,"onUpdate:selection":a[2]||(a[2]=i=>t.selection=i),scroll:t.height,hideSelection:!1,"selection-type":t.multiple?"checkbox":"radio"},null,8,["data","selection","scroll","selection-type"])]),_:1})]),_:1},8,["visible"])],64)}var qt=q(W,[["render",Q],["__scopeId","data-v-1d6d3548"]]);export{qt as default};

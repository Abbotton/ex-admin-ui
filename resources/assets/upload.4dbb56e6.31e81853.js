import{t as R,a as y,f as L,p as V,a9 as ue,$ as r,w as c,h as s,j as v,m as K,q as G,K as X,x as O,F as j,P as p,i as u,aa as oe,ab as ne,W as S,L as M,ac as re,l as P,ad as se,Z as pe,Q as de,u as ce,v as W,Y as ve,S as H,O as D,y as k,J as q,k as me,I as J,r as T,n as fe}from"./dynamicTag.98ddbc91.js";import{V as ye}from"./uploader.44537534.bae2d392.js";import"./vue.4c5758a0.js";import"./@babel.dd651e2b.js";import"./regenerator-runtime.8e24db72.js";import"./@vue.87afd1fa.js";import"./index.97f9c525.js";import"./js-md5.3cdd41c4.js";import"./vue-router.9a2c52dc.js";import"./js-cookie.31874410.js";import"./ant-design-vue.e954adc4.js";import"./@ant-design.8c82b126.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.0743a87f.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.28c974ad.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.67682d36.js";import"./vue-demi.24ed2461.js";import"./axios.e3200588.js";/* empty css                     */import"./sortablejs.412b554c.js";import"./clipboard.89482ba1.js";import"./markdown-it.39ce48f9.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.169105cf.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.52338b19.js";const ge=["onMouseover"],he={class:"image-tool"},be={name:"ExImagePreview"},ke=Object.assign(be,{props:{value:Array,width:{type:Number,default:80},height:{type:Number,default:80}},emits:["update:value"],setup(e,{emit:m}){const i=R(e,"value",m),x=y(),g=y(-1);let F;L(()=>{F=V.create(x.value,{handle:".image",onEnd:o=>{const t=i.value.splice(o.oldIndex,1)[0];i.value.splice(o.newIndex,0,t)}})}),ue(o=>{F&&F.destroy()});function d(o){g.value=o}function h(o){i.value.splice(o,1)}return(o,t)=>{const f=r("caret-left-outlined"),w=r("delete-outlined"),b=r("caret-right-outlined"),U=r("a-image");return c(i).length>0?(s(),v("div",{key:0,class:"file-list",ref_key:"sortFileList",ref:x},[(s(!0),v(K,null,G(c(i),($,B)=>(s(),v("div",{class:"image",key:$,style:X({height:e.height+"px",width:e.width+"px"}),onMouseover:E=>d(B),onMouseout:t[0]||(t[0]=E=>d(-1))},[O(p("div",he,[u(f,{onClick:E=>c(oe)(c(i),B)},null,8,["onClick"]),u(w,{onClick:E=>h(B)},null,8,["onClick"]),u(b,{onClick:E=>c(ne)(c(i),B)},null,8,["onClick"])],512),[[j,g.value==B]]),u(U,{fit:"contain",src:$,width:e.width-2,height:e.height-2,style:{"border-radius":"5%",cursor:"pointer","object-fit":"contain"}},null,8,["src","width","height"])],44,ge))),128))],512)):S("",!0)}}});var Y=M(ke,[["__scopeId","data-v-ad0c1774"]]);const Se={class:"file-item"},we=["href"],xe={class:"file-icon"},Fe={class:"text"},Be={class:"label"},Ee={name:"ExFilePreview"},_e=Object.assign(Ee,{props:{value:Array},emits:["update:value"],setup(e,{emit:m}){const i=e,x=y(),g=R(i,"value",m);L(()=>{V.create(x.value,{handle:".file-item",onEnd:d=>{const h=g.value.splice(d.oldIndex,1)[0];g.value.splice(d.newIndex,0,h)}})});function F(d){g.value.splice(d,1)}return(d,h)=>{const o=r("a-image"),t=r("vertical-align-bottom-outlined"),f=r("delete-outlined"),w=r("check-outlined");return c(g).length>0?(s(),v("div",{key:0,ref_key:"sortFileList",ref:x},[(s(!0),v(K,null,G(c(g),(b,U)=>(s(),v("div",Se,[p("a",{class:"left",target:"_blank",href:b},[p("div",xe,[u(o,{src:c(re)(b),width:32,height:32},null,8,["src"])]),u(t,{class:"download"}),p("span",Fe,P(c(se)(b)),1)],8,we),u(f,{onClick:$=>F(U),class:"delete",style:{cursor:"pointer"}},null,8,["onClick"]),p("label",Be,[u(w,{class:"success"})])]))),256))],512)):S("",!0)}}});var Ce=M(_e,[["__scopeId","data-v-b6c69410"]]);const ee=e=>(pe("data-v-e6749b44"),e=e(),de(),e),Ae=["title"],Oe={class:"file-upload"},je=ee(()=>p("i",{class:"far fa-folder-open"},null,-1)),Ue={key:2,class:"file-list"},$e={style:{"font-size":"12px"}},Ie=ee(()=>p("i",{class:"fas fa-plus"},null,-1)),Pe={name:"ExUploader"},ze=Object.assign(Pe,{props:{value:[String,Array],finder:[Boolean,Object],action:String,options:{type:Object,default:{}},imageWidth:{type:Number,default:80},imageHeight:{type:Number,default:80},type:{type:String,default:"file"},params:{type:Object,default:{}},headers:{type:Object,default:{}},disk:{type:String,default:"local"},driver:{type:String,default:"local"},directory:{type:String,default:""},hideFinder:{type:Boolean,default:!1},chunk:{type:Boolean,default:!0},chunkSize:{type:Number,default:1},input:{type:Boolean,default:!1},limit:{type:Number,default:0},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},paste:{type:Boolean,default:!1},progress:{type:Boolean,default:!0},saveFinder:{type:Boolean,default:!0},onlyShow:{type:Boolean,default:!0},isDirectory:{type:Boolean,default:!1},accept:{type:String,default:"*"},ext:{type:Array,default:[]},fileSize:{type:Number,default:0},domain:{type:String,default:""},accessKey:{type:String,default:""},secretKey:{type:String,default:""},bucket:{type:String,default:""},region:{type:String,default:""},uploadToken:String},emits:["update:value","success","error","progress","fileSubmit","addFile"],setup(e,{emit:m}){const i=e,x={x:"max-content",y:window.innerHeight/2},g=ce(),F=y(),d=y(),h=y(!1),o=y(0),t=y([]),f=y(""),w=y(""),b=y(!1);W(()=>i.value,l=>{E(l)}),W(t,l=>{i.limit>0&&l.length>i.limit&&(t.value=t.value.slice(0,i.limit)),f.value=l.join("|"),i.multiple?m("update:value",l):m("update:value",f.value)},{deep:!0}),E(i.value);function U(l){b.value=!1}function $(l){b.value=!0}function B(l){if(b.value){l=l.originalEvent||l;let a,C,A,N,I;for(a=l.clipboardData.items,A=0,N=a.length;A<N;A++)C=a[A],!(C.kind!=="file"||!(I=C.getAsFile()))&&_.uploader.addFile(I)}}function E(l){i.multiple?t.value=l:l?t.value=[l]:t.value=[]}let _=null;W(()=>i.params,l=>{_.options.params=l}),ve(()=>{_.uploader.cancel(),_=null}),le();function le(){L(()=>{_=ye(i),_.input(d.value),_.watch({addFile:(l,a)=>{if(m("addFile",l,a),i.ext.length>0&&i.ext.indexOf(l.getExtension())===-1)return H.error("\u53EA\u5141\u8BB8\u4E0A\u4F20\u7C7B\u578B\u683C\u5F0F "+i.ext.join(",")),!1;if(i.fileSize>0&&l.size>i.fileSize)return H.error("\u4E0A\u4F20\u6587\u4EF6\u8D85\u51FA\u9650\u5236\u5927\u5C0F"+g.fileSizeText),!1},fileSubmit:l=>{if(m("fileSubmit",l),i.multiple&&i.limit>0&&l.length+t.value.length>i.limit)return H.error("\u6700\u5927\u5141\u8BB8\u4E0A\u4F20"+i.limit+"\u4E2A\u6587\u4EF6"),!1},success:l=>{m("success",l),i.multiple||(t.value=[]),t.value.push(l),o.value=0},verifyProgress:l=>{w.value="\u6821\u9A8C\u4E2D",o.value=l},progress:l=>{m("progress",l),w.value="\u4E0A\u4F20\u4E2D",o.value=l},error:l=>{m("error",l)}})})}function z(l){t.value=f.value.split("|"),t.value=t.value.filter(function(a){return a&&a.trim()})}return(l,a)=>{const C=r("a-input"),A=r("a-popover"),N=r("cloud-upload-outlined"),I=r("a-button"),Q=r("a-space"),Z=r("a-progress"),te=r("render"),ie=r("a-form-item-rest"),ae=r("a-modal");return s(),v("div",{class:fe(["uploader",e.paste?"paste":"",e.paste&&b.value?"pasteFocus":""]),ref_key:"container",ref:F,title:e.paste?"\u7C98\u8D34\u4E0A\u4F20":"",onPaste:B,onFocus:$,onBlur:U,tabindex:"-1"},[e.type=="file"&&!e.onlyShow?(s(),D(Ce,{key:0,value:t.value,"onUpdate:value":a[0]||(a[0]=n=>t.value=n)},null,8,["value"])):S("",!0),p("div",Oe,[e.type=="image"&&e.input?(s(),D(A,{key:0},{content:k(()=>[u(Y,{value:t.value,"onUpdate:value":a[1]||(a[1]=n=>t.value=n)},null,8,["value"])]),default:k(()=>[u(C,{value:f.value,"onUpdate:value":a[2]||(a[2]=n=>f.value=n),disabled:e.disabled,onBlur:z,onPressEnter:z,allowClear:""},null,8,["value","disabled"])]),_:1})):(s(),v(K,{key:1},[e.input?(s(),D(C,{key:0,value:f.value,"onUpdate:value":a[3]||(a[3]=n=>f.value=n),disabled:e.disabled,onBlur:z,onPressEnter:z,allowClear:""},null,8,["value","disabled"])):S("",!0)],64)),e.type=="file"||e.input?(s(),v("span",{key:2,ref_key:"element",ref:d},[q(l.$slots,"default",{},()=>[O(u(Q,null,{default:k(()=>[u(I,null,{icon:k(()=>[u(N)]),default:k(()=>[me(" "+P(c(J)("Uploader.upload")),1)]),_:1}),!e.hideFinder&&e.finder?(s(),D(I,{key:0,onClick:a[4]||(a[4]=T(n=>h.value=!0,["stop"]))},{icon:k(()=>[je]),_:1})):S("",!0)]),_:1},512),[[j,e.multiple&&(e.limit==0||t.value.length<e.limit)||t.value.length==0||e.onlyShow]])],!0)],512)):S("",!0)]),(e.type=="file"||e.input)&&!e.progress?(s(),v(K,{key:1},[O(u(Z,{status:"active",percent:o.value},null,8,["percent"]),[[j,o.value>0]]),O(p("div",null,P(w.value),513),[[j,o.value>0]])],64)):S("",!0),e.type=="image"&&!e.input?(s(),v("div",Ue,[u(Y,{value:t.value,"onUpdate:value":a[5]||(a[5]=n=>t.value=n)},null,8,["value"]),O(p("span",{ref_key:"element",ref:d},[q(l.$slots,"default",{},()=>[p("div",{class:"image-btn",style:X({height:e.imageHeight+"px",width:e.imageWidth+"px"})},[O(u(Z,{type:"circle",percent:o.value,width:e.imageHeight},{format:k(n=>[p("div",null,P(n)+"%",1),p("div",$e,P(w.value),1)]),_:1},8,["percent","width"]),[[j,o.value>0]]),u(Q,{direction:"vertical"},{default:k(()=>[Ie,!e.hideFinder&&e.finder?(s(),v("i",{key:0,class:"far fa-folder-open",onClick:a[6]||(a[6]=T(n=>h.value=!0,["stop"]))})):S("",!0)]),_:1})],4)],!0)],512),[[j,e.multiple&&(e.limit==0||t.value.length<e.limit)||t.value.length==0]])])):S("",!0),u(ae,{visible:h.value,"onUpdate:visible":a[8]||(a[8]=n=>h.value=n),width:"70%",title:c(J)("Uploader.finder"),onOk:a[9]||(a[9]=n=>h.value=!1)},{default:k(()=>[u(ie,null,{default:k(()=>[u(te,{data:e.finder,selection:t.value,"onUpdate:selection":a[7]||(a[7]=n=>t.value=n),"selection-limit":e.limit,"selection-type":e.multiple?"checkbox":"radio",scroll:x},null,8,["data","selection","selection-limit","selection-type"])]),_:1})]),_:1},8,["visible","title"])],42,Ae)}}});var El=M(ze,[["__scopeId","data-v-e6749b44"]]);export{El as default};

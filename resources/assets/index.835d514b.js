var Oe=Object.defineProperty;var he=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var _e=(o,b,I)=>b in o?Oe(o,b,{enumerable:!0,configurable:!0,writable:!0,value:I}):o[b]=I,ge=(o,b)=>{for(var I in b||(b={}))Ve.call(b,I)&&_e(o,I,b[I]);if(he)for(var I of he(b))Se.call(b,I)&&_e(o,I,b[I]);return o};import{_ as Le,a as $e,s as F,w as ne,x as re,f as ve}from"./index.9da8c55d.js";import{l as J}from"./lodash.c9cf1bdb.js";import"./vue.db505ee4.js";import{d as ze}from"./vuedraggable.e7e6f001.js";import{d as Ne,q as Be,r as Fe,a as Ue,p as qe,n as We,t as je,aW as _,aR as g,ar as R,bd as d,c as a,as as T,au as u,at as E,aV as K,R as O,af as oe,S as k,ai as y,H as Q,ah as Pe,U as Ge,aT as He,aS as Je}from"./@vue.cb43a243.js";import{m as Ke,M as Me}from"./ant-design-vue.6b10f349.js";import"./js-md5.5179c6be.js";import"./@babel.6cd0804c.js";import"./regenerator-runtime.8e24db72.js";import"./vue-router.a08742b9.js";import"./js-cookie.31874410.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.81e70e6d.js";import"./vue-demi.5fb18120.js";import"./axios.e3200588.js";import"./@ant-design.bcfb08ae.js";import"./@ctrl.fa7cbd46.js";/* empty css                     */import"./dayjs.38e390ea.js";import"./sortablejs.412b554c.js";import"./clipboard.099d05c9.js";import"./markdown-it.80c3a67b.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.c97a8414.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.86f7507c.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";const Qe=Ne({name:"ExCurd",components:{draggable:ze},setup(o,b){const I=$e(),e=Be({tables:[],searchTable:"",controller:[],controllerIndex:-1,method:[],methodIndex:-1,drawingMain:{component:null,ref:null},componentList:[],controllerForm:null,controllerEditForm:null,methodForm:null,methodEditForm:null,settingForm:null,settingFormList:[],settingFormVisible:!0,tableVisible:!1,tableModalRender:null,tableTreeNode:null,tableModalTitle:null,index:-1,database:null,isSave:!0,methodTypes:[{value:"grid",label:"\u6570\u636E\u8868\u683C(grid)"},{value:"form",label:"\u8868\u5355(form)"},{value:"detail",label:"\u8BE6\u60C5(detail)"}]}),se=Fe(),ce=Fe();X(),addEventListener("keydown",V),addEventListener("keyup",q),Ue(()=>{removeEventListener("keydown",V),removeEventListener("keyup",q)});const U=qe(()=>e.tables.filter(t=>t.name.indexOf(e.searchTable)>-1||t.comment.indexOf(e.searchTable)>-1));let C=0,w=0;function V(t){t.keyCode==17&&(C=1),t.keyCode==83&&(w=1),C==1&&w==1&&Z()}function q(t){t.keyCode==17&&(C=0),t.keyCode==83&&(w=0)}function $(){W()}function X(){H(),L(),F("ex-admin/plugin-curd-controller-Index/getFormComponent").then(t=>{e.componentList=t.data})}function z(t){for(let n in t.content){let l=J.exports.cloneDeep(t.content),r=[];l[n].forEach(c=>{r.push(c),z(c)}),["ExForm","ARow","ACol"].indexOf(t.name)>-1&&(n=="default"?t.content[n]=D(t.name,r,t):t.content[n]=r)}}function Y(t){return M(t,!0)}function M(t,n=!1){let l;return n?l=t.draggedContext.element.component.name:l=t.draggedContext.element.name,!(l=="ACol"&&t.relatedContext.component.$attrs.group.name!="ARow"||l!="ACol"&&t.relatedContext.component.$attrs.group.name=="ARow")}function D(t,n,l={}){let r="";return t=="ARow"?r="curd-children-row":t=="ACol"&&(r="curd-row-draggable"),[{name:"DraggableRender",attribute:{group:{name:t,put:!0,pull:!0},animation:1e3,chosenClass:"ex-drag-choose",list:n,tag:t=="ARow"?"render":"div",componentData:{data:l},class:r,style:{width:"100%"},move:c=>M(c)},event:{End:c=>{fe()},Sort:c=>{e.drawingMain.ref.forceUpdate()},Choose:c=>{document.querySelectorAll("[data-choose]").forEach(f=>{f.removeAttribute("data-choose")}),c.item.setAttribute("data-choose",!0);let s=c.item.__draggable_context.element;s.name==="AFormItem"?e.settingForm=s.content.default[0].attribute.drawingForm:s.name=="DraggableRender"?e.settingForm=s.attribute.componentData.data.attribute.drawingForm:e.settingForm=s.attribute.drawingForm}}}]}const W=J.exports.debounce(P,150);function S(t,n,l,r,c,s,f){t.forEach(v=>{if(v.name=="AFormItem"){if(v.attribute&&v.attribute.name.indexOf("default")>-1){let p=n[v.content.default[0].bindAttribute.value.replace(r+".","")];p===void 0&&(p=n[l[s]]),n[l[s]]=p,l.default=n[l[s]],v.content.default[0].bindAttribute.value=f,v.content.default[0].modelBind.value=f}else if(c.name==="ARangePicker"&&v.attribute.title==="\u9ED8\u8BA4\u503C"){n[l[s]]=n[v.content.default[0].bindAttribute.value.replace(r+".","")],l.default=n[l[s]],v.content.default[0].bindAttribute.value=f,v.content.default[0].modelBind.value=f;const p=c.attribute.startField;c.attribute.startField=r+"."+p.substr(p.indexOf(".")+1);const h=c.attribute.endField;c.attribute.endField=r+"."+h.substr(h.indexOf(".")+1)}}else v.content&&v.content.default&&S(v.content.default,n,l,r,c,s,f)})}function j(t){t.forEach(n=>{if(typeof n=="object"){if(n.name=="AFormItem"){const l=e.drawingMain.component,r=l.bindAttribute.model,c=l.bind[r];let s=n,f=s.content.default[0],v=f.attribute.drawingForm,p=v.bind[v.bindAttribute.model];for(let h in p)if(h=="title")s.attribute.label=p[h];else if(!(["name","default"].indexOf(h)>-1))if(h=="required")s.attribute.required=p[h];else if(h=="field"&&f.name!="ACascader"){let x=r+"."+p[h];f.bindAttribute[p.modelValue]=x,f.modelBind[p.modelValue]=x,s.attribute.name=[p[h]],S(v.content.default,c,p,r,f,h,x)}else if(["character","addonBefore","addonAfter","prefix","suffix"].indexOf(h)>-1&&p[h]){let x=Ge(p[h]);Array.isArray(x)?f.content[h]=x:f.content[h]=[x]}else if(h==="config"){for(let x in p[h])x=="options"&&p[h].options_type==3&&(f.attribute.options=[],Object.assign(f.attribute.options,p[h][x]));if(f.name=="ExSelectTable"){let x="ex-admin/"+p[h].grid_class.replaceAll("\\","-")+"/"+p[h].grid_method,be={};p[h].params.forEach(pe=>{be[pe.var]=pe.value}),ne(f.attribute,"gridUrl",x),ne(f.attribute,"params",be)}}else ne(f.attribute,h,p[h])}else if(n.name=="DraggableRender")n.attribute.key=re(20),j(n.attribute.list);else if(n.name=="ARow"||n.name=="ACol"){let l=n.attribute.drawingForm,r=l.bind[l.bindAttribute.model];delete n.attribute.md,delete n.attribute.sm,delete n.attribute.xs;for(let c in r)ne(n.attribute,c,r[c])}n.content&&n.content.default&&j(n.content.default)}})}function P(){const t=e.drawingMain.component;let n=t.attribute.drawingForm,l=n.bind[n.bindAttribute.model];if(t.name=="ExForm")Object.assign(t.attribute,l),t.content.default||(t.content.default=[]),j(t.content.default);else if(t.name=="ExGrid"){const r=[];for(let c in l)c=="columns"?(l[c].forEach(s=>{r.push({dataIndex:s.field,title:s.label,type:s.form_type||"",header:{name:"html",attribute:{class:"ex_admin_table_th_name","data-tag":"span"},content:{default:[s.label]}}})}),l.switch.indexOf("hideAction")==-1&&r.push({dataIndex:"ExAdminAction",title:"",header:{name:"html",attribute:{class:"ex_admin_table_th_name","data-tag":"span"},content:{default:[""]}}}),t.attribute.columns=r):c=="switch"?l.swtichOptions.forEach(s=>{t.attribute[s]=l[c].indexOf(s)>-1}):t.attribute[c]=l[c]}else if(t.name=="ADescriptions")for(let r in l)if(r=="items"){const c=[];l[r].forEach(s=>{var f;c.push({name:"ADescriptionsItem",attribute:{title:s.label,span:s.span},content:{default:[(f=t.attribute.data[s.field])!=null?f:"--"],label:[s.label]}})}),t.content.default=c}else t.attribute[r]=l[r];e.drawingMain.ref.forceUpdate(),e.isSave=!1}function N(t,n){t.forEach(l=>{let r;if(typeof l=="object"){if(l.name=="AFormItem"){const c=e.drawingMain.component;let s=l.content.default[0].attribute.drawingForm;e.settingFormList.push(s);let f=s.bindAttribute.model;ve(s.bind[f],s.attribute.exceptField||[]);const v=c.bindAttribute.model,p=c.bind[v];s.bind[f].default=p[s.bind[f].field],n.push(s.bind[f]),r=s.bind[f]}else if(l.name=="DraggableRender")N(l.attribute.list,n);else if(l.name=="ARow"||l.name=="ACol"){let c=l.attribute.drawingForm,s=c.bindAttribute.model;ve(c.bind[s],c.attribute.exceptField||[]),n.push(c.bind[s]),r=c.bind[s]}l.content&&l.content.default&&r&&(r.content=[],N(l.content.default,r.content))}})}function Z(){e.settingFormList=[],W(),setTimeout(()=>{let t={};const n=e.drawingMain.component;let l=n.attribute.drawingForm.bindAttribute.model;if(t.config=n.attribute.drawingForm.bind[l],n.name=="ExForm"){t.type="form",t.component=[],N(n.content.default,t.component);let r=0;We(()=>{e.settingFormList.forEach(c=>{I[c.bindAttribute.ref].form.validate().then(()=>{r++,r==e.settingFormList.length&&G(t)}).catch(s=>{s.errorFields.forEach(f=>{let v=`\u3010${s.values.title}\u3011`||"\u3010\u3011";Ke.error(v+f.errors[0]),e.settingFormList=[]})})})})}else n.name=="ExGrid"?(t.type="grid",G(t)):n.name=="ADescriptions"&&(t.type="detail",G(t))},500)}function G(t){F({url:"ex-admin/plugin-curd-controller-Index/save",method:"post",data:{id:e.method[e.methodIndex].id,controller:e.controller[e.controllerIndex].name,class:e.controller[e.controllerIndex].class,function:e.method[e.methodIndex].name,setting:t}}).then(n=>{e.settingFormList=[],me(e.methodIndex,!1),e.isSave=!0})}function le(t){e.drawingMain.ref=t}function H(){F("ex-admin/plugin-curd-controller-Index/getController?curd_ref="+b.attrs.curd_ref).then(t=>{e.controller=t.data.list,e.controllerForm=t.data.controllerForm})}function L(){F("ex-admin/plugin-curd-controller-Database/getTable").then(t=>{e.tables=t.data.map(n=>(n.tableName=n.name,n.dataRef=n,n.name=n.id,n.children=[],n.class="table-tree-node",n))})}function ee(t){if(e.tableVisible=!1,!t){L();return}return new Promise(n=>{F("ex-admin/plugin-curd-controller-Database/getTableColumn?table="+t.dataRef.id).then(l=>{t.dataRef.children=l.data.map(r=>(r.id=t.id+r.field,r.name=r.field,r.table=t.id,r.parent=t,r.isLeaf=!0,r)),e.tables=[...e.tables],n()})})}function B(t){Me.confirm({title:"\u5220\u9664\u8868",content:"\u786E\u8BA4\u5220\u9664\u8868\uFF0C\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){F.delete("/ex-admin/plugin-curd-controller-Database/grid",{data:{ex_admin_action:"delete",ex_admin_sidebar:!0,ids:[t]}}).then(n=>{L()})}})}function te(t,n,l){Me.confirm({title:"\u5220\u9664\u8868\u5B57\u6BB5",content:"\u786E\u8BA4\u5220\u9664\u8868\u5B57\u6BB5\uFF0C\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){F.delete("/ex-admin/plugin-curd-controller-Database/grid",{data:{ex_admin_action:"delete",ex_admin_trashed:"false",table:t,ids:[n]}}).then(r=>{ee(l)})}})}function ae(t,n,l){e.tableTreeNode=l,e.tableModalTitle="\u7F16\u8F91\u5B57\u6BB5",e.tableModalRender=null,F.put("/ex-admin/plugin-curd-controller-Database/form",{table:t,field:n}).then(r=>{e.tableVisible=!0,e.tableModalRender=r,e.tableModalRender.footer=r.content.footer[0],delete e.tableModalRender.content.footer})}function de(){e.tableTreeNode=null,e.tableModalTitle="\u6DFB\u52A0\u8868",e.tableModalRender=null,F.post("/ex-admin/plugin-curd-controller-Database/tableForm").then(t=>{e.tableVisible=!0,e.tableModalRender=t,e.tableModalRender.footer=t.content.footer[0],delete e.tableModalRender.content.footer})}function i(){e.tableTreeNode=null,e.tableModalTitle="\u8868\u9884\u8BBE\u5B57\u6BB5",e.tableModalRender=null,F.post("/ex-admin/plugin-curd-controller-Database/presetFields").then(t=>{e.tableVisible=!0,e.tableModalRender=t,e.tableModalRender.footer=t.content.footer[0],delete e.tableModalRender.content.footer})}function m(t){e.tableTreeNode=null,e.tableModalTitle="\u7F16\u8F91\u8868",e.tableModalRender=null,F.post("/ex-admin/plugin-curd-controller-Database/tableForm",{id:t}).then(n=>{e.tableVisible=!0,e.tableModalRender=n,e.tableModalRender.footer=n.content.footer[0],delete e.tableModalRender.content.footer})}function A(t){e.tableModalTitle="\u5173\u8054\u8868(\u6A21\u578B)",e.tableModalRender=null,F.post("/ex-admin/plugin-curd-controller-Database/modelRelationForm",{table:t}).then(n=>{e.tableVisible=!0,e.tableModalRender=n,e.tableModalRender.footer=n.content.footer[0],delete e.tableModalRender.content.footer})}function Ce(t){e.tableModalTitle="\u6DFB\u52A0\u8868\u5B57\u6BB5",e.tableModalRender=null,F.post("/ex-admin/plugin-curd-controller-Database/form",{table:t}).then(n=>{e.tableVisible=!0,e.tableModalRender=n,e.tableModalRender.footer=n.content.footer[0],delete e.tableModalRender.content.footer})}function ue(){e.methodIndex=-1,F({url:"ex-admin/plugin-curd-controller-Index/getMethod",method:"post",data:{curd_ref:b.attrs.curd_ref,class:e.controller[e.controllerIndex].class,controller:e.controller[e.controllerIndex].class,table:e.controller[e.controllerIndex].table,id:e.controller[e.controllerIndex].id}}).then(t=>{e.methodForm=t.data.methodForm,e.method=t.data.list})}function ye(){F({url:"ex-admin/plugin-curd-controller-Index/deleteMethod",method:"post",data:{class:e.controller[e.controllerIndex].class,controller:e.controller[e.controllerIndex].name,method:e.method[e.methodIndex].name,id:e.method[e.methodIndex].id}}).then(t=>{e.methodIndex=-1,e.method.splice(e.methodIndex,1)})}function ke(){F({url:"ex-admin/plugin-curd-controller-Index/createMethodInit",method:"post",data:{class:e.controller[e.controllerIndex].class,name,type}}).then(t=>{ue()})}function Ie(){const t=e.controller[e.controllerIndex];F({url:"ex-admin/plugin-curd-controller-Index/deleteController",method:"post",data:{id:t.id,path:t.path}}).then(n=>{e.controllerIndex=-1,H(),e.method=[]})}function me(t,n=!0){e.methodIndex=t,e.settingForm=null,F({url:"ex-admin/plugin-curd-controller-Index/render",method:"post",data:{class:e.controller[e.controllerIndex].class,function:e.method[e.methodIndex].name,var:[]}}).then(l=>{e.isSave=!0,z(l.data),e.drawingMain.component=l.data})}function Re(t,n){n.mouseenter=!0,e.tableTreeNode=n,e.tables=[...e.tables]}function xe(t,n){n.mouseenter=!1,e.tables=[...e.tables]}function we(t){t.newIndex!==t.oldIndex&&F.post("ex-admin/plugin-curd-controller-Database/sortField",{table:t.item.__draggable_context.element.table,field:t.item.__draggable_context.element.field,sort:t.newIndex})}function Ae(t){if(!t.component)return!1;let n=J.exports.cloneDeep(t.component);if(n.name=="AFormItem"){let l=n.content.default[0].attribute.drawingForm,r=l.bind[l.bindAttribute.model];l.attribute.key=re(20),r.field||(r.field=re(20)),n.attribute.validateFormField=e.drawingMain.component.bindAttribute.validateField}if(n.name=="ARow"){let l=[],r=[];n.content.default[0].content={default:D("ACol",r)},l=n.content.default,n.content={default:D(n.name,l,n)}}else if(n.name=="ACol"){let l=[];n.content={default:D(n.name,l,n)}}return n}function fe(t){P()}function Te(t){return!(!t.relatedContext.element.table&&!t.draggedContext.element.component)}function Ee(t){if(t){const n=e.controller[e.controllerIndex];e.controllerEditForm=J.exports.cloneDeep(e.controllerForm);let l=e.controllerEditForm.content.content[0].attribute.params;l.id=n.id,l.class=n.class,l.path=n.path,l.title=n.title,l.name=n.name,l.table=n.table}}function De(t){if(t){const n=e.method[e.methodIndex];e.methodEditForm=J.exports.cloneDeep(e.methodForm);let l=e.methodEditForm.content.content[0].attribute.params;l.id=n.id,l.type=n.type,l.name=n.name,l.oldTitle=n.title}}return ge({onFieldMove:Te,onMove:M,onCloneMove:Y,onEnd:fe,onClone:Ae,relationTable:A,onFieldSort:we,addTable:de,presetFields:i,editTableField:ae,editTable:m,deleteTable:B,addTableField:Ce,tableMouseLeave:xe,tableMouseenter:Re,onLoadTable:ee,deleteTableField:te,getController:H,watchModel:$,dragSave:Z,getRender:me,getMethod:ue,deleteMethod:ye,createMethodInit:ke,deleteController:Ie,getTable:L,controllerFormVisible:Ee,methodFormVisible:De,dragRef:se,drawingRef:ce,setRef:le,tableMenus:U},je(e))}}),ie=o=>(He("data-v-390db246"),o=o(),Je(),o),Xe=k(" \u6DFB\u52A0 "),Ye=k(" \u7F16\u8F91 "),Ze=k(" \u5220\u9664 "),et={class:"flex-column"},tt={class:"title"},nt=ie(()=>u("span",null,"\u63A7\u5236\u5668",-1)),ot={class:"flex-1-auto"},lt=["onContextmenu","onClick"],at={class:"name"},dt={class:"desc"},rt=k(" \u6DFB\u52A0 "),it=k(" \u7F16\u8F91 "),st=k(" \u5220\u9664 "),ct={class:"flex-column"},ut={class:"title"},mt=ie(()=>u("span",null,"\u65B9\u6CD5",-1)),ft={class:"flex-1-auto"},bt=["onContextmenu","onClick"],pt={class:"name"},ht={class:"desc"},_t={class:"flex-column"},gt={style:{margin:"0 10px 10px 10px"}},vt=k("\u6DFB\u52A0\u8868"),Ft=k("\u8868\u9884\u8BBE\u5B57\u6BB5"),Mt=["onMouseenter","onMouseleave"],Ct={class:"table-tree-title"},yt=["title"],kt={key:0,class:"table-tree-action-table"},It=["title"],Rt=["onMouseenter","onMouseleave"],xt={class:"table-tree-title"},wt=["title"],At={key:0,class:"table-tree-action"},Tt=["title"],Et={class:"components"},Dt={style:{display:"flex","align-items":"center",margin:"5px"}},Ot=ie(()=>u("i",{class:"fas fa-layer-group"},null,-1)),Vt={style:{"margin-left":"5px"}},St={class:"components-draggable"},Lt={class:"components-item"},$t={class:"components-body"},zt={class:"header"},Nt=k("(ctrl+s)"),Bt={class:"drawing scrollbar",ref:"drawingRef"},Ut={style:{display:"none"}};function qt(o,b,I,e,se,ce){const U=_("PlusOutlined"),C=_("render"),w=_("a-menu-item"),V=_("EditOutlined"),q=_("question-circle-outlined"),$=_("DeleteOutlined"),X=_("a-popconfirm"),z=_("a-menu"),Y=_("ReloadOutlined"),M=_("a-button"),D=_("a-tooltip"),W=_("a-dropdown"),S=_("a-layout-sider"),j=_("a-modal"),P=_("reload-outlined"),N=_("a-space"),Z=_("a-input"),G=_("FolderOutlined"),le=_("NodeIndexOutlined"),H=_("FileOutlined"),L=_("draggable"),ee=_("a-sub-menu"),B=_("a-tab-pane"),te=_("a-tabs"),ae=_("a-layout-content"),de=_("a-layout");return g(),R(de,{class:"layout"},{default:d(()=>[a(S,{width:130,class:"controller scrollbar"},{default:d(()=>[a(W,{trigger:["contextmenu"],onVisibleChange:o.controllerFormVisible},{overlay:d(()=>[a(z,null,{default:d(()=>[a(w,null,{default:d(()=>[a(C,{data:o.controllerEditForm},{default:d(()=>[a(U),Xe]),_:1},8,["data"])]),_:1}),o.controllerIndex>-1?(g(),R(w,{key:0},{default:d(()=>[a(C,{data:o.controllerEditForm},{default:d(()=>[a(V),Ye]),_:1},8,["data"])]),_:1})):T("",!0),o.controllerIndex>-1?(g(),R(X,{key:1,title:"\u786E\u8BA4\u5220\u9664\uFF1F",onConfirm:b[0]||(b[0]=i=>o.deleteController())},{icon:d(()=>[a(q,{style:{color:"red"}})]),default:d(()=>[a(w,null,{icon:d(()=>[a($)]),default:d(()=>[Ze]),_:1})]),_:1})):T("",!0)]),_:1})]),default:d(()=>[u("div",et,[u("div",tt,[nt,u("div",null,[a(C,{data:o.controllerForm},null,8,["data"]),a(M,{size:"small",shape:"circle",onClick:o.getController},{icon:d(()=>[a(Y)]),_:1},8,["onClick"])])]),u("ul",ot,[(g(!0),E(Q,null,K(o.controller,(i,m)=>(g(),E("li",{key:m,onContextmenu:O(A=>o.controllerIndex=m,["prevent"]),onClick:A=>{o.controllerIndex=m,o.getMethod()},class:oe(o.controllerIndex==m?"active":"")},[a(D,{placement:"bottom",mouseEnterDelay:1},{title:d(()=>[k(y(i.title),1)]),default:d(()=>[u("div",at,y(i.title),1)]),_:2},1024),a(D,{placement:"bottom",mouseEnterDelay:1},{title:d(()=>[k(y(i.path),1)]),default:d(()=>[u("div",dt,y(i.name),1)]),_:2},1024)],42,lt))),128))])])]),_:1},8,["onVisibleChange"])]),_:1}),a(S,{width:130,class:"controller scrollbar"},{default:d(()=>[a(W,{trigger:["contextmenu"],onVisibleChange:o.methodFormVisible},{overlay:d(()=>[a(z,null,{default:d(()=>[o.controllerIndex>-1?(g(),R(w,{key:0},{default:d(()=>[a(C,{data:o.methodForm},{default:d(()=>[a(U),rt]),_:1},8,["data"])]),_:1})):T("",!0),o.methodIndex>-1?(g(),R(w,{key:1},{default:d(()=>[a(C,{data:o.methodEditForm},{default:d(()=>[a(V),it]),_:1},8,["data"])]),_:1})):T("",!0),o.methodIndex>-1?(g(),R(X,{key:2,title:"\u786E\u8BA4\u5220\u9664\uFF1F",onConfirm:b[1]||(b[1]=i=>o.deleteMethod())},{icon:d(()=>[a(q,{style:{color:"red"}})]),default:d(()=>[a(w,null,{icon:d(()=>[a($)]),default:d(()=>[st]),_:1})]),_:1})):T("",!0)]),_:1})]),default:d(()=>[u("div",ct,[u("div",ut,[mt,u("div",null,[a(C,{disabled:o.controllerIndex==-1,data:o.methodForm,onSuccess:o.createMethodInit},null,8,["disabled","data","onSuccess"]),a(M,{size:"small",shape:"circle",onClick:b[2]||(b[2]=i=>o.getMethod())},{icon:d(()=>[a(Y)]),_:1})])]),u("ul",ft,[(g(!0),E(Q,null,K(o.method,(i,m)=>(g(),E("li",{key:m,onContextmenu:O(A=>o.methodIndex=m,["prevent"]),onClick:A=>o.getRender(m),class:oe(o.methodIndex==m?"active":"")},[a(D,{placement:"bottom",mouseEnterDelay:1},{title:d(()=>[k(y(i.title),1)]),default:d(()=>[u("div",pt,y(i.title),1)]),_:2},1024),a(D,{placement:"bottom",mouseEnterDelay:1},{title:d(()=>[k(y(i.name),1)]),default:d(()=>[u("div",ht,y(i.name),1)]),_:2},1024)],42,bt))),128))])])]),_:1},8,["onVisibleChange"])]),_:1}),a(S,{width:300,class:"scrollbar",ref:"dragRef"},{default:d(()=>[a(te,{type:"card",class:"curd-tabs"},{default:d(()=>[a(B,{key:"1",tab:"\u6570\u636E\u5E93",style:{height:"100%"}},{default:d(()=>[a(j,{visible:o.tableVisible,"onUpdate:visible":b[4]||(b[4]=i=>o.tableVisible=i),title:o.tableModalTitle,width:"1000px"},{footer:d(()=>[o.tableModalRender?(g(),R(C,{key:0,data:o.tableModalRender.footer},null,8,["data"])):T("",!0)]),default:d(()=>[a(C,{data:o.tableModalRender,onSuccess:b[3]||(b[3]=i=>o.onLoadTable(o.tableTreeNode))},null,8,["data"])]),_:1},8,["visible","title"]),u("div",_t,[u("div",gt,[a(N,{style:{"margin-bottom":"10px"}},{default:d(()=>[a(M,{onClick:o.addTable},{default:d(()=>[vt]),_:1},8,["onClick"]),a(M,{onClick:o.presetFields},{default:d(()=>[Ft]),_:1},8,["onClick"]),a(M,{shape:"circle",size:"small",onClick:o.getTable},{icon:d(()=>[a(P)]),_:1},8,["onClick"])]),_:1}),a(Z,{value:o.searchTable,"onUpdate:value":b[5]||(b[5]=i=>o.searchTable=i),size:"small",placeholder:"\u641C\u7D22\u8868","allow-clear":""},null,8,["value"])]),a(z,{mode:"inline",class:"curd-table-tree",selectable:!1},{default:d(()=>[(g(!0),E(Q,null,K(o.tableMenus,i=>(g(),R(ee,{key:i.id,onTitleClick:m=>o.onLoadTable(i)},{title:d(()=>[u("div",{onMouseenter:m=>o.tableMouseenter(m,i),onMouseleave:m=>o.tableMouseLeave(m,i)},[u("div",Ct,[a(G),u("div",{class:"field-title",title:i.name},y(i.name),9,yt),i.mouseenter?(g(),E("div",kt,[a(M,{shape:"circle",size:"small",onClick:O(m=>o.onLoadTable(i),["stop"])},{icon:d(()=>[a(P)]),_:2},1032,["onClick"]),a(M,{shape:"circle",size:"small",onClick:O(m=>o.addTableField(i.id),["stop"])},{icon:d(()=>[a(U)]),_:2},1032,["onClick"]),a(M,{shape:"circle",size:"small",onClick:O(m=>o.editTable(i.id),["stop"])},{icon:d(()=>[a(V)]),_:2},1032,["onClick"]),a(M,{shape:"circle",size:"small",onClick:O(m=>o.relationTable(i.id),["stop"])},{icon:d(()=>[a(le)]),_:2},1032,["onClick"]),a(M,{shape:"circle",size:"small",onClick:O(m=>o.deleteTable(i.id),["stop"])},{icon:d(()=>[a($)]),_:2},1032,["onClick"])])):T("",!0)]),u("div",{class:"field-title-desc",title:i.comment},y(i.comment),9,It)],40,Mt)]),default:d(()=>[a(L,{style:{width:"100%"},list:i.children,onSort:o.onFieldSort,clone:o.onClone,move:o.onFieldMove,onEnd:o.onEnd,group:{pull:"clone",put:!1},"item-key":"id"},{item:d(({element:m})=>[u("div",{onMouseenter:A=>o.tableMouseenter(A,m),onMouseleave:A=>o.tableMouseLeave(A,m)},[(g(),R(w,{key:m.id},{default:d(()=>[u("div",xt,[a(H),u("div",{class:"field-title",title:m.name},y(m.name),9,wt),m.mouseenter?(g(),E("div",At,[a(M,{shape:"circle",size:"small",onClick:O(A=>o.editTableField(i.id,m.field,i),["stop"])},{icon:d(()=>[a(V)]),_:2},1032,["onClick"]),a(M,{shape:"circle",size:"small",onClick:O(A=>o.deleteTableField(i.id,m.field,i),["stop"])},{icon:d(()=>[a($)]),_:2},1032,["onClick"])])):T("",!0)]),u("div",{class:"field-title-desc",title:m.comment},y(m.comment),9,Tt)]),_:2},1024))],40,Rt)]),_:2},1032,["list","onSort","clone","move","onEnd"])]),_:2},1032,["onTitleClick"]))),128))]),_:1})])]),_:1}),a(B,{key:"2",tab:"\u8868\u5355\u8BBE\u8BA1",forceRender:""},{default:d(()=>[(g(!0),E(Q,null,K(o.componentList,i=>(g(),E("div",Et,[u("div",Dt,[Ot,u("div",Vt,y(i.label),1)]),u("div",St,[a(L,{list:i.options,sort:!1,clone:o.onClone,onEnd:o.onEnd,move:o.onCloneMove,"chosen-class":"chosen-class",group:{name:"components",pull:"clone",put:!1}},{item:d(({element:m})=>[u("div",Lt,[u("div",$t,[u("i",{class:oe(m.icon)},null,2),k(" "+y(m.label),1)])])]),_:2},1032,["list","clone","onEnd","move"])])]))),256))]),_:1})]),_:1})]),_:1},512),a(ae,{class:"main"},{default:d(()=>[u("div",zt,[a(N,null,{default:d(()=>[a(M,{onClick:o.dragSave},{default:d(()=>[u("span",{style:Pe(o.isSave?"":"color: red;")},"\u4FDD\u5B58",4),Nt]),_:1},8,["onClick"])]),_:1})]),u("div",Bt,[a(C,{ref:i=>o.setRef(i),data:o.drawingMain.component},null,8,["data"])],512)]),_:1}),u("div",{class:"collapse",onClick:b[6]||(b[6]=i=>o.settingFormVisible=!o.settingFormVisible)},[u("i",{class:oe(o.settingFormVisible?"fas fa-angle-double-right":"fas fa-angle-double-left")},null,2)]),o.settingFormVisible?(g(),R(S,{key:0,width:360,class:"settingForm scrollbar"},{default:d(()=>[a(te,{type:"card",class:"curd-tabs"},{default:d(()=>[o.settingForm?(g(),R(B,{key:"1",tab:"\u7EC4\u4EF6\u5C5E\u6027"},{default:d(()=>[a(C,{data:o.settingForm,onWatchModel:o.watchModel},null,8,["data","onWatchModel"])]),_:1})):T("",!0),a(B,{key:"2",tab:"\u5C5E\u6027",forceRender:""},{default:d(()=>[o.drawingMain.component?(g(),R(C,{key:0,data:o.drawingMain.component.attribute.drawingForm,onWatchModel:o.watchModel},null,8,["data","onWatchModel"])):T("",!0)]),_:1})]),_:1})]),_:1})):T("",!0),u("div",Ut,[(g(!0),E(Q,null,K(o.settingFormList,i=>(g(),R(C,{data:i,onWatchModel:o.watchModel},null,8,["data","onWatchModel"]))),256))])]),_:1})}var On=Le(Qe,[["render",qt],["__scopeId","data-v-390db246"]]);export{On as default};

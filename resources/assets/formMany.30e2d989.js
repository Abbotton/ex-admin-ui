var J=Object.defineProperty;var V=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var E=(t,i,r)=>i in t?J(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r,x=(t,i)=>{for(var r in i||(i={}))K.call(i,r)&&E(t,r,i[r]);if(V)for(var r of V(i))Q.call(i,r)&&E(t,r,i[r]);return t};import"./vue.a928b16e.js";import{S as X}from"./sortablejs.412b554c.js";import{_ as Y,A as P,t as u,f as R}from"./index.651dbde8.js";import{r as j,f as Z,n as ee,a as te,w as O,aW as _,aR as o,at as h,ar as d,bd as n,I as s,ai as c,as as m,c as g,F as T,u as e,au as ae,aV as le,P as oe,z as $,E as B}from"./@vue.a7cd1c69.js";import"./vue-router.49bf991f.js";import"./js-md5.216a9fc2.js";import"./@babel.7a426183.js";import"./regenerator-runtime.59ce731c.js";import"./lodash.5fa5cd01.js";import"./spark-md5.2cc5764b.js";import"./axios.e3200588.js";import"./ant-design-vue.33297aa8.js";import"./@ant-design.8381fcec.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.8a2ffed6.js";import"./dayjs.060c2017.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./js-cookie.31874410.js";/* empty css                     */import"./clipboard.76283100.js";const ne={class:"hasMany"},re={key:1},ie={key:0,style:{"margin-top":"5px"}},de={key:2},se={name:"ExFormMany"},ce=Object.assign(se,{props:{value:{type:Array,default:[]},limit:{type:Number,default:0},disabled:Boolean,drag:Boolean,itemData:Object,table:Boolean,field:String,title:String,columns:Array,recursion:{type:Array,default:[]}},emits:["update:value"],setup(t,{emit:i}){const r=t,C=j(-1),w=j();let a=Z(r.value.map((l,v)=>(l.ex_admin_id=v+1,l))),M=null;r.drag&&ee(()=>{let l;r.table?l=w.value.table.$el.querySelectorAll(".ant-table-content > table > tbody")[0]:l=w.value,M=X.create(l,{animation:1e3,onEnd:v=>{const b=a.splice(v.oldIndex,1)[0];a.splice(v.newIndex,0,b)}})}),te(l=>{M&&M.destroy()}),O(()=>r.value,l=>{a=l}),O(a,l=>{i("update:value",l)},{deep:!0});function F(){const l=x({},r.itemData);l.ex_admin_id=a.length+1,a.push(l)}function S(l){a.splice(l,1)}function A(){a.splice(0)}function U(l,v){return{onMouseenter:b=>{C.value=v},onMouseleave:b=>{C.value=-1}}}return(l,v)=>{const b=_("a-divider"),D=_("render"),q=_("caret-up-filled"),L=_("caret-down-filled"),W=_("close-circle-filled"),G=_("a-space"),H=_("a-table"),p=_("a-button"),I=_("a-form-item");return o(),h("div",ne,[t.title?(o(),d(b,{key:0,orientation:"left"},{default:n(()=>[s(c(t.title),1)]),_:1})):m("",!0),t.table?(o(),h("div",re,[g(H,{"row-key":"ex_admin_id",ref_key:"drag",ref:w,"data-source":e(a),bordered:"",columns:t.columns,size:"small",class:"table",pagination:!1,"custom-row":U},{headerCell:n(({column:k})=>[g(D,{data:k.header},null,8,["data"])]),bodyCell:n(({column:k,record:f,text:z,index:y})=>[k.type=="action"?(o(),d(G,{key:0},{default:n(()=>[t.disabled?m("",!0):(o(),h(T,{key:0},[C.value==y&&e(a).length>1&&y>0?(o(),d(q,{key:0,onClick:N=>e(P)(e(a),y)},{default:n(()=>[s(c(e(u)("FormMany.up")),1)]),_:2},1032,["onClick"])):m("",!0),C.value==y&&e(a).length>1&&y<e(a).length-1?(o(),d(L,{key:1,onClick:N=>e(R)(e(a),y)},{default:n(()=>[s(c(e(u)("FormMany.down")),1)]),_:2},1032,["onClick"])):m("",!0),C.value==y&&e(a).length>0?(o(),d(W,{key:2,style:{color:"red"},type:"dashed",onClick:N=>S(y)},{default:n(()=>[s(c(e(u)("FormMany.remove")),1)]),_:2},1032,["onClick"])):m("",!0)],64))]),_:2},1024)):(o(),d(D,{key:1,scopeProp:{$index:y,field:t.field,row:f,recursion:t.recursion},data:k.component},null,8,["scopeProp","data"]))]),_:1},8,["data-source","columns"]),t.disabled?m("",!0):(o(),h("div",ie,[t.limit==0||t.limit>e(a).length?(o(),d(p,{key:0,size:"small",type:"dashed",onClick:F},{default:n(()=>[s(c(e(u)("FormMany.add")),1)]),_:1})):m("",!0),t.limit==0||t.limit>e(a).length?(o(),d(p,{key:1,size:"small",type:"danger",onClick:A},{default:n(()=>[s(c(e(u)("FormMany.clear")),1)]),_:1})):m("",!0)]))])):(o(),h("div",de,[ae("div",{ref_key:"drag",ref:w},[(o(!0),h(T,null,le(e(a),(k,f)=>(o(),h("div",{key:k.ex_admin_id},[oe(l.$slots,"default",{$index:f,field:t.field,row:k,recursion:t.recursion},void 0,!0),t.disabled?m("",!0):(o(),d(I,{key:0,label:" ",colon:!1},{default:n(()=>[e(a).length-1==f&&(t.limit==0||t.limit>e(a).length)?(o(),d(p,{key:0,size:"small",type:"dashed",onClick:F},{default:n(()=>[s(c(e(u)("FormMany.add")),1)]),_:1})):m("",!0),$(g(p,{size:"small",type:"dashed",onClick:z=>S(f)},{default:n(()=>[s(c(e(u)("FormMany.remove")),1)]),_:2},1032,["onClick"]),[[B,e(a).length>0]]),$(g(p,{size:"small",onClick:z=>e(P)(e(a),f)},{default:n(()=>[s(c(e(u)("FormMany.up")),1)]),_:2},1032,["onClick"]),[[B,e(a).length>1&&f>0]]),$(g(p,{size:"small",onClick:z=>e(R)(e(a),f)},{default:n(()=>[s(c(e(u)("FormMany.down")),1)]),_:2},1032,["onClick"]),[[B,e(a).length>1&&f<e(a).length-1]]),e(a).length-1==f&&(t.limit==0||t.limit>e(a).length)?(o(),d(p,{key:1,size:"small",type:"dashed",onClick:A},{default:n(()=>[s(c(e(u)("FormMany.clear")),1)]),_:1})):m("",!0)]),_:2},1024)),g(b)]))),128))],512),e(a).length==0&&!t.disabled?(o(),d(I,{key:0,label:" ",colon:!1},{default:n(()=>[g(p,{size:"small",type:"dashed",onClick:F},{default:n(()=>[s(c(e(u)("FormMany.add")),1)]),_:1})]),_:1})):m("",!0)]))])}}});var Pe=Y(ce,[["__scopeId","data-v-7886a01f"]]);export{Pe as default};

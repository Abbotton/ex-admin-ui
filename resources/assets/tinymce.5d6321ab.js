var x=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var b=(e,i,a)=>i in e?x(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a,y=(e,i)=>{for(var a in i||(i={}))w.call(i,a)&&b(e,a,i[a]);if(h)for(var a of h(i))V.call(i,a)&&b(e,a,i[a]);return e};import{t as m}from"./tinymce.140b5d43.js";import{E as I}from"./@tinymce.3ae7ba29.js";import"./vue.fe178274.js";import{_ as S,p as g}from"./index.42cb231c.js";import{u as C}from"./uploader.555df8c7.js";import{d as j,a as E,q as N,w as f,t as T,aW as z,aR as p,at as d,au as v,G as _,aV as A,ai as B,as as U,c as $,n as F,aT as O,aS as q}from"./@vue.9a7efb20.js";import"./@babel.6cd0804c.js";import"./regenerator-runtime.8e24db72.js";import"./js-md5.5179c6be.js";import"./vue-router.ac7a6022.js";import"./js-cookie.31874410.js";import"./ant-design-vue.1ee395b3.js";import"./@ant-design.e295b84c.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.38e390ea.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.c9cf1bdb.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.47cba78b.js";import"./vue-demi.819cf47c.js";import"./axios.e3200588.js";/* empty css                     */import"./clipboard.099d05c9.js";import"./markdown-it.80c3a67b.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.c97a8414.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.75eb798b.js";import"./simple-uploader.js.04c42387.js";import"./ali-oss.ce3a624c.js";import"./qiniu-js.8b174ca3.js";import"./querystring.62f12500.js";const R=j({name:"ExTinymceEditor",components:{Editor:I},props:{value:{type:String,default:""},height:{type:[String,Number],default:500},width:{type:[String,Number],default:"auto"},toolbar:{type:[String,Array],default:"bold italic underline strikethrough | fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent blockquote | undo redo | link unlink image axupimgs media code | removeformat fullscreen"},options:{type:[Object,Array],default:{}},tags:{type:Array,default:[]},upload:{type:[Object,Array],default:{}}},emits:["update:value"],setup(e,i){const a="/ex-admin/";let l=C(e.upload);E(()=>{l.uploader.cancel(),l=null});const o=N({init:{base_url:a+"tinymce",language_url:a+"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:a+"tinymce/skins/ui/oxide",content_css:a+"tinymce/skins/content/default/content.css",height:e.height,width:e.width,fontsize_formats:"10px 11px 12px 14px 16px 18px 20px 24px 36px",menubar:!1,plugins:"axupimgs advlist anchor autolink autosave code codesample directionality fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak preview print save searchreplace spellchecker tabfocus table template textpattern visualblocks visualchars wordcount",toolbar:e.toolbar,file_picker_types:"media",video_template_callback:t=>'<video width="'+t.width+'" height="'+t.height+'"'+(t.poster?' poster="'+t.poster+'"':"")+' controls="controls" src="'+t.source+'"></video>',file_picker_callback:(t,n,s)=>{if(s.filetype=="media"){let r=document.createElement("input");r.setAttribute("type","file"),r.onchange=function(H){let k=this.files[0];u(k,t)},r.click()}},branding:!1,convert_urls:!1,content_style:'img {max-width:100% !important } .ex-admin-tag{color:#1890ff;background:#e6f7ff;box-sizing:border-box;margin:0 8px 0 0;font-variant:tabular-nums;list-style:none;font-feature-settings:"tnum";display:inline-block;height:auto;padding:0 7px;font-size:12px;line-height:20px;white-space:nowrap;border:1px solid #91d5ff;border-radius:2px;opacity:1;transition:all .3s}',external_plugins:{powerpaste:a+"tinymce/plugins/powerpaste/plugin.min.js"},images_upload_handler:(t,n,s)=>{let r=t.blob();r=new File([r],r.name),u(r,n)}},myValue:e.value,elementId:g(),tag:g()});o.elementId=g(),Object.assign(o.init,e.options),f(()=>e.value,t=>{o.myValue=t}),f(()=>o.myValue,t=>{i.emit("update:value",t)}),f(()=>[e.height,e.width,e.toolbar,e.options],()=>{m.get(o.elementId)&&(m.get(o.elementId).remove(),Object.assign(o.init,{width:e.width,height:e.height,toolbar:e.toolbar,selector:"#"+o.elementId},e.options),F(()=>{m.init(o.init)}))});function u(t,n){l.uploader.addFile(t),l.watch({success:s=>{n(s)}})}function c(t){const n=m.get(o.elementId);n.execCommand("mceInsertContent",!1,'<span class="ex-admin-tag" contenteditable="false">'+t.target.innerText+"</span>"),o.myValue=n.getContent()}return y({insertTag:c},T(o))}}),L=e=>(O("data-v-4972e440"),e=e(),q(),e),D={key:0,class:"tags"},G=L(()=>v("div",null,"\u70B9\u51FB\u63D2\u5165\uFF1A",-1)),M={class:"tags-group"};function W(e,i,a,l,o,u){const c=z("editor");return p(),d(_,null,[e.tags.length>0?(p(),d("div",D,[G,v("div",M,[(p(!0),d(_,null,A(e.tags,t=>(p(),d("span",{onClick:i[0]||(i[0]=(...n)=>e.insertTag&&e.insertTag(...n)),class:"exadmin-tag"},B(t),1))),256))])])):U("",!0),$(c,{modelValue:e.myValue,"onUpdate:modelValue":i[1]||(i[1]=t=>e.myValue=t),init:e.init,id:e.elementId,"tag-name":e.tag},null,8,["modelValue","init","id","tag-name"])],64)}var Le=S(R,[["render",W],["__scopeId","data-v-4972e440"]]);export{Le as default};

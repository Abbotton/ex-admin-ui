var Oe=Object.defineProperty;var Me=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var Ce=(n,e,F)=>e in n?Oe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:F}):n[e]=F,ye=(n,e)=>{for(var F in e||(e={}))$e.call(e,F)&&Ce(n,F,e[F]);if(Me)for(var F of Me(e))Le.call(e,F)&&Ce(n,F,e[F]);return n};import{_ as Se,a as Ne,s as _,w as ne,x as ce,f as we}from"./index.708a3a7e.js";import{l as me}from"./lodash.c9cf1bdb.js";import"./vue.db505ee4.js";import{d as Ve}from"./vuedraggable.e7e6f001.js";import{d as Ue,q as qe,r as Fe,a as ze,p as Be,n as We,t as je,aW as f,aR as g,ar as I,bd as a,c as l,at as x,aV as B,S as M,ai as w,H as W,as as O,au as m,R as L,af as oe,ah as Pe,U as Ge,aT as He,aS as Je}from"./@vue.cb43a243.js";import{m as Ke,M as Ie}from"./ant-design-vue.6b10f349.js";import"./js-md5.5179c6be.js";import"./@babel.6cd0804c.js";import"./regenerator-runtime.8e24db72.js";import"./vue-router.a08742b9.js";import"./js-cookie.31874410.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.81e70e6d.js";import"./vue-demi.5fb18120.js";import"./axios.e3200588.js";import"./@ant-design.bcfb08ae.js";import"./@ctrl.fa7cbd46.js";/* empty css                     */import"./dayjs.38e390ea.js";import"./sortablejs.412b554c.js";import"./clipboard.099d05c9.js";import"./markdown-it.80c3a67b.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.c97a8414.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.86f7507c.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";const Qe=Ue({name:"ExCurd",components:{draggable:Ve},setup(){const n=Ne(),e=qe({tables:[],searchTable:"",controller:[],controllerIndex:-1,newController:{table:"",title:"",name:""},newMethod:{title:"",name:"",type:""},method:[],methodIndex:-1,drawingMain:{component:null,ref:null},componentList:[],settingForm:null,settingFormList:[],settingFormVisible:!0,tableVisible:!1,tableModalRender:null,tableTreeNode:null,tableModalTitle:null,index:-1,database:null,isSave:!0,methodTypes:[{value:"grid",label:"\u6570\u636E\u8868\u683C(grid)"},{value:"form",label:"\u8868\u5355(form)"},{value:"detail",label:"\u8BE6\u60C5(detail)"}]}),F=Fe(),fe=Fe();C(),addEventListener("keydown",P),addEventListener("keyup",y),ze(()=>{removeEventListener("keydown",P),removeEventListener("keyup",y)});const be=Be(()=>e.tables.filter(t=>t.name.indexOf(e.searchTable)>-1||t.comment.indexOf(e.searchTable)>-1));let X=0,j=0;function P(t){t.keyCode==17&&(X=1),t.keyCode==83&&(j=1),X==1&&j==1&&K()}function y(t){t.keyCode==17&&(X=0),t.keyCode==83&&(j=0)}function R(){U()}function C(){E(),D(),_("ex-admin/plugin-curd-controller-Index/getFormComponent").then(t=>{e.componentList=t.data})}function V(t){for(let o in t.content){let r=me.exports.cloneDeep(t.content),i=[];r[o].forEach(u=>{i.push(u),V(u)}),["ExForm","ARow","ACol"].indexOf(t.name)>-1&&(t.content[o]=$(t.name,i,t))}}function G(t){return T(t,!0)}function T(t,o=!1){let r;return o?r=t.draggedContext.element.component.name:r=t.draggedContext.element.name,!(r=="ACol"&&t.relatedContext.component.$attrs.group.name!="ARow"||r!="ACol"&&t.relatedContext.component.$attrs.group.name=="ARow")}function $(t,o,r={}){let i="";return t=="ARow"?i="curd-children-row":t=="ACol"&&(i="curd-row-draggable"),[{name:"DraggableRender",attribute:{group:{name:t,put:!0,pull:!0},animation:1e3,chosenClass:"ex-drag-choose",list:o,tag:t=="ARow"?"render":"div",componentData:{data:r},class:i,style:{width:"100%"},move:u=>T(u)},event:{End:u=>{ge()},Sort:u=>{e.drawingMain.ref.forceUpdate()},Choose:u=>{document.querySelectorAll("[data-choose]").forEach(p=>{p.removeAttribute("data-choose")}),u.item.setAttribute("data-choose",!0);let s=u.item.__draggable_context.element;s.name==="AFormItem"?e.settingForm=s.content.default[0].attribute.drawingForm:s.name=="DraggableRender"?e.settingForm=s.attribute.componentData.data.attribute.drawingForm:e.settingForm=s.attribute.drawingForm}}}]}const U=me.exports.debounce(J,150);function H(t,o,r,i,u,s,p){t.forEach(v=>{if(v.name=="AFormItem"){if(v.attribute&&v.attribute.name.indexOf("default")>-1){let b=o[v.content.default[0].bindAttribute.value.replace(i+".","")];b===void 0&&(b=o[r[s]]),o[r[s]]=b,r.default=o[r[s]],v.content.default[0].bindAttribute.value=p,v.content.default[0].modelBind.value=p}else if(u.name==="ARangePicker"&&v.attribute.title==="\u9ED8\u8BA4\u503C"){o[r[s]]=o[v.content.default[0].bindAttribute.value.replace(i+".","")],r.default=o[r[s]],v.content.default[0].bindAttribute.value=p,v.content.default[0].modelBind.value=p;const b=u.attribute.startField;u.attribute.startField=i+"."+b.substr(b.indexOf(".")+1);const h=u.attribute.endField;u.attribute.endField=i+"."+h.substr(h.indexOf(".")+1)}}else v.content&&v.content.default&&H(v.content.default,o,r,i,u,s,p)})}function S(t){t.forEach(o=>{if(typeof o=="object"){if(o.name=="AFormItem"){const r=e.drawingMain.component,i=r.bindAttribute.model,u=r.bind[i];let s=o,p=s.content.default[0],v=p.attribute.drawingForm,b=v.bind[v.bindAttribute.model];for(let h in b)if(h=="title")s.attribute.label=b[h];else if(!(["name","default"].indexOf(h)>-1))if(h=="required")s.attribute.required=b[h];else if(h=="field"&&p.name!="ACascader"){let k=i+"."+b[h];p.bindAttribute[b.modelValue]=k,p.modelBind[b.modelValue]=k,s.attribute.name=[b[h]],H(v.content.default,u,b,i,p,h,k)}else if(["character","addonBefore","addonAfter","prefix","suffix"].indexOf(h)>-1&&b[h]){let k=Ge(b[h]);Array.isArray(k)?p.content[h]=k:p.content[h]=[k]}else if(h==="config"){for(let k in b[h])k=="options"&&b[h].options_type==3&&(p.attribute.options=[],Object.assign(p.attribute.options,b[h][k]));if(p.name=="ExSelectTable"){let k="ex-admin/"+b[h].grid_class.replaceAll("\\","-")+"/"+b[h].grid_method,_e={};b[h].params.forEach(ve=>{_e[ve.var]=ve.value}),ne(p.attribute,"gridUrl",k),ne(p.attribute,"params",_e)}}else ne(p.attribute,h,b[h])}else if(o.name=="DraggableRender")o.attribute.key=ce(20),S(o.attribute.list);else if(o.name=="ARow"||o.name=="ACol"){let r=o.attribute.drawingForm,i=r.bind[r.bindAttribute.model];delete o.attribute.md,delete o.attribute.sm,delete o.attribute.xs;for(let u in i)ne(o.attribute,u,i[u])}o.content&&o.content.default&&S(o.content.default)}})}function J(){const t=e.drawingMain.component;let o=t.attribute.drawingForm,r=o.bind[o.bindAttribute.model];if(t.name=="ExForm")Object.assign(t.attribute,r),t.content.default||(t.content.default=[]),S(t.content.default);else if(t.name=="ExGrid"){const i=[];for(let u in r)u=="columns"?(r[u].forEach(s=>{i.push({dataIndex:s.field,title:s.label,type:s.form_type||"",header:{name:"html",attribute:{class:"ex_admin_table_th_name","data-tag":"span"},content:{default:[s.label]}}})}),r.switch.indexOf("hideAction")==-1&&i.push({dataIndex:"ExAdminAction",title:"",header:{name:"html",attribute:{class:"ex_admin_table_th_name","data-tag":"span"},content:{default:[""]}}}),t.attribute.columns=i):u=="switch"?r.swtichOptions.forEach(s=>{t.attribute[s]=r[u].indexOf(s)>-1}):t.attribute[u]=r[u]}else if(t.name=="ADescriptions")for(let i in r)if(i=="items"){const u=[];r[i].forEach(s=>{var p;u.push({name:"ADescriptionsItem",attribute:{title:s.label,span:s.span},content:{default:[(p=t.attribute.data[s.field])!=null?p:"--"],label:[s.label]}})}),t.content.default=u}else t.attribute[i]=r[i];e.drawingMain.ref.forceUpdate(),e.isSave=!1}function q(t,o){t.forEach(r=>{let i;if(typeof r=="object"){if(r.name=="AFormItem"){const u=e.drawingMain.component;let s=r.content.default[0].attribute.drawingForm;e.settingFormList.push(s);let p=s.bindAttribute.model;we(s.bind[p],s.attribute.exceptField||[]);const v=u.bindAttribute.model,b=u.bind[v];s.bind[p].default=b[s.bind[p].field],o.push(s.bind[p]),i=s.bind[p]}else if(r.name=="DraggableRender")q(r.attribute.list,o);else if(r.name=="ARow"||r.name=="ACol"){let u=r.attribute.drawingForm,s=u.bindAttribute.model;we(u.bind[s],u.attribute.exceptField||[]),o.push(u.bind[s]),i=u.bind[s]}r.content&&r.content.default&&i&&(i.content=[],q(r.content.default,i.content))}})}function K(){e.settingFormList=[],U(),setTimeout(()=>{let t={};const o=e.drawingMain.component;let r=o.attribute.drawingForm.bindAttribute.model;if(t.config=o.attribute.drawingForm.bind[r],o.name=="ExForm"){t.type="form",t.component=[],q(o.content.default,t.component);let i=0;We(()=>{e.settingFormList.forEach(u=>{n[u.bindAttribute.ref].form.validate().then(()=>{i++,i==e.settingFormList.length&&N(t)}).catch(s=>{s.errorFields.forEach(p=>{let v=`\u3010${s.values.title}\u3011`||"\u3010\u3011";Ke.error(v+p.errors[0]),e.settingFormList=[]})})})})}else o.name=="ExGrid"?(t.type="grid",N(t)):o.name=="ADescriptions"&&(t.type="detail",N(t))},500)}function N(t){_({url:"ex-admin/plugin-curd-controller-Index/save",method:"post",data:{id:e.method[e.methodIndex].id,controller:e.controller[e.controllerIndex].name,class:e.controller[e.controllerIndex].class,function:e.method[e.methodIndex].name,setting:t}}).then(o=>{e.settingFormList=[],he(e.methodIndex,!1),e.isSave=!0})}function Y(t){e.drawingMain.ref=t}function E(){_("ex-admin/plugin-curd-controller-Index/getController").then(t=>{e.controller=t.data})}function D(){_("ex-admin/plugin-curd-controller-Database/getTable").then(t=>{e.tables=t.data.map(o=>(o.tableName=o.name,o.dataRef=o,o.name=o.id,o.children=[],o.class="table-tree-node",o))})}function Z(t){if(e.tableVisible=!1,!t){D();return}return new Promise(o=>{_("ex-admin/plugin-curd-controller-Database/getTableColumn?table="+t.dataRef.id).then(r=>{t.dataRef.children=r.data.map(i=>(i.id=t.id+i.field,i.name=i.field,i.table=t.id,i.parent=t,i.isLeaf=!0,i)),e.tables=[...e.tables],o()})})}function ee(t){Ie.confirm({title:"\u5220\u9664\u8868",content:"\u786E\u8BA4\u5220\u9664\u8868\uFF0C\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){_.delete("/ex-admin/plugin-curd-controller-Database/grid",{data:{ex_admin_action:"delete",ex_admin_sidebar:!0,ids:[t]}}).then(o=>{D()})}})}function le(t,o,r){Ie.confirm({title:"\u5220\u9664\u8868\u5B57\u6BB5",content:"\u786E\u8BA4\u5220\u9664\u8868\u5B57\u6BB5\uFF0C\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){_.delete("/ex-admin/plugin-curd-controller-Database/grid",{data:{ex_admin_action:"delete",ex_admin_trashed:"false",table:t,ids:[o]}}).then(i=>{Z(r)})}})}function ae(t,o,r){e.tableTreeNode=r,e.tableModalTitle="\u7F16\u8F91\u5B57\u6BB5",e.tableModalRender=null,_.put("/ex-admin/plugin-curd-controller-Database/form",{table:t,field:o}).then(i=>{e.tableVisible=!0,e.tableModalRender=i,e.tableModalRender.footer=i.content.footer[0],delete e.tableModalRender.content.footer})}function de(){e.tableTreeNode=null,e.tableModalTitle="\u6DFB\u52A0\u8868",e.tableModalRender=null,_.post("/ex-admin/plugin-curd-controller-Database/tableForm").then(t=>{e.tableVisible=!0,e.tableModalRender=t,e.tableModalRender.footer=t.content.footer[0],delete e.tableModalRender.content.footer})}function re(){e.tableTreeNode=null,e.tableModalTitle="\u8868\u9884\u8BBE\u5B57\u6BB5",e.tableModalRender=null,_.post("/ex-admin/plugin-curd-controller-Database/presetFields").then(t=>{e.tableVisible=!0,e.tableModalRender=t,e.tableModalRender.footer=t.content.footer[0],delete e.tableModalRender.content.footer})}function te(t){e.tableTreeNode=null,e.tableModalTitle="\u7F16\u8F91\u8868",e.tableModalRender=null,_.post("/ex-admin/plugin-curd-controller-Database/tableForm",{id:t}).then(o=>{e.tableVisible=!0,e.tableModalRender=o,e.tableModalRender.footer=o.content.footer[0],delete e.tableModalRender.content.footer})}function ie(t){e.tableModalTitle="\u5173\u8054\u8868(\u6A21\u578B)",e.tableModalRender=null,_.post("/ex-admin/plugin-curd-controller-Database/modelRelationForm",{table:t}).then(o=>{e.tableVisible=!0,e.tableModalRender=o,e.tableModalRender.footer=o.content.footer[0],delete e.tableModalRender.content.footer})}function z(t){e.tableModalTitle="\u6DFB\u52A0\u8868\u5B57\u6BB5",e.tableModalRender=null,_.post("/ex-admin/plugin-curd-controller-Database/form",{table:t}).then(o=>{e.tableVisible=!0,e.tableModalRender=o,e.tableModalRender.footer=o.content.footer[0],delete e.tableModalRender.content.footer})}function Q(t){e.methodIndex=-1,_({url:"ex-admin/plugin-curd-controller-Index/getMethod",method:"post",data:{id:t}}).then(o=>{e.method=o.data})}function se(){_({url:"ex-admin/plugin-curd-controller-Index/deleteMethod",method:"post",data:{class:e.controller[e.controllerIndex].class,controller:e.controller[e.controllerIndex].name,method:e.method[e.methodIndex].name,id:e.method[e.methodIndex].id}}).then(t=>{e.methodIndex=-1,e.method.splice(e.methodIndex,1)})}function ue(){const t=e.controller[e.controllerIndex].class,o=e.method[e.methodIndex];_({url:"ex-admin/plugin-curd-controller-Index/updateMethod",method:"post",data:{controller:t,id:o.id,name:o.name,title:o.title,updateTitle:o.updateTitle,updateName:o.updateName}}).then(r=>{e.method[e.methodIndex].title=o.updateTitle,e.method[e.methodIndex].name=o.updateName})}function d(t,o,r){_({url:"ex-admin/plugin-curd-controller-Index/createController",method:"post",data:{name:o,title:t,table:r}}).then(i=>{e.newController.title="",e.newController.table="",e.newController.name="",E()})}function c(t,o,r){_({url:"ex-admin/plugin-curd-controller-Index/createMethod",method:"post",data:{controller_id:e.controller[e.controllerIndex].id,class:e.controller[e.controllerIndex].class,controller:e.controller[e.controllerIndex].name,table:e.controller[e.controllerIndex].table,name:o,type:r,title:t}}).then(i=>{e.newMethod.title="",e.newMethod.name="",e.newMethod.type="",e.method.push({name:o,title:t,updateTitle:t,updateName:o}),_({url:"ex-admin/plugin-curd-controller-Index/createMethodInit",method:"post",data:{class:e.controller[e.controllerIndex].class,name:o,type:r}}).then(u=>{Q(e.controller[e.controllerIndex].id)})})}function A(){const t=e.controller[e.controllerIndex];_({url:"ex-admin/plugin-curd-controller-Index/updateController",method:"post",data:{id:t.id,path:t.path,class:t.class,title:t.title,updateName:t.name}}).then(o=>{E()})}function ke(){const t=e.controller[e.controllerIndex];_({url:"ex-admin/plugin-curd-controller-Index/deleteController",method:"post",data:{id:t.id,path:t.path}}).then(o=>{e.controllerIndex=-1,E(),e.method=[]})}function he(t,o=!0){e.methodIndex=t,e.settingForm=null,_({url:"ex-admin/plugin-curd-controller-Index/render",method:"post",data:{class:e.controller[e.controllerIndex].class,function:e.method[e.methodIndex].name,var:[]}}).then(r=>{e.isSave=!0,V(r.data),e.drawingMain.component=r.data})}function Re(t,o){o.mouseenter=!0,e.tableTreeNode=o,e.tables=[...e.tables]}function Te(t,o){o.mouseenter=!1,e.tables=[...e.tables]}function Ae(t){t.newIndex!==t.oldIndex&&_.post("ex-admin/plugin-curd-controller-Database/sortField",{table:t.item.__draggable_context.element.table,field:t.item.__draggable_context.element.field,sort:t.newIndex})}function xe(t){if(!t.component)return!1;let o=me.exports.cloneDeep(t.component);if(o.name=="AFormItem"){let r=o.content.default[0].attribute.drawingForm,i=r.bind[r.bindAttribute.model];r.attribute.key=ce(20),i.field||(i.field=ce(20)),o.attribute.validateFormField=e.drawingMain.component.bindAttribute.validateField}if(o.name=="ARow"){let r=[],i=[];o.content.default[0].content={default:$("ACol",i)},r=o.content.default,o.content={default:$(o.name,r,o)}}else if(o.name=="ACol"){let r=[];o.content={default:$(o.name,r,o)}}return o}function ge(t){J()}function Ee(t){return!(!t.relatedContext.element.table&&!t.draggedContext.element.component)}function De(t){e.newController.name=t}return ye({changeTable:De,onFieldMove:Ee,onMove:T,onCloneMove:G,onEnd:ge,onClone:xe,relationTable:ie,onFieldSort:Ae,addTable:de,presetFields:re,editTableField:ae,editTable:te,deleteTable:ee,addTableField:z,tableMouseLeave:Te,tableMouseenter:Re,onLoadTable:Z,deleteTableField:le,getController:E,watchModel:R,dragSave:K,getRender:he,getMethod:Q,deleteMethod:se,updateMethod:ue,createController:d,createMethod:c,updateController:A,deleteController:ke,dragRef:F,drawingRef:fe,setRef:Y,tableMenus:be},je(e))}}),pe=n=>(He("data-v-b92e563e"),n=n(),Je(),n),Xe=M("\u4FDD\u5B58 "),Ye=M(" \u6DFB\u52A0 "),Ze=M(" \u4FDD\u5B58 "),et=M(" \u7F16\u8F91 "),tt=M(" \u5220\u9664 "),nt={class:"flex-column"},ot={class:"title"},lt=pe(()=>m("span",null,"\u63A7\u5236\u5668",-1)),at={class:"flex-1-auto"},dt=["onContextmenu","onClick"],rt={class:"name"},it={class:"desc"},st=M(" \u4FDD\u5B58 "),ut=M(" \u6DFB\u52A0 "),ct=M(" \u4FDD\u5B58 "),mt=M(" \u7F16\u8F91 "),pt=M(" \u5220\u9664 "),ft={class:"flex-column"},bt={class:"title"},ht=pe(()=>m("span",null,"\u65B9\u6CD5",-1)),gt={class:"flex-1-auto"},_t=["onContextmenu","onClick"],vt={class:"name"},Mt={class:"desc"},Ct={class:"flex-column"},yt={style:{margin:"0 10px 10px 10px"}},wt=M("\u6DFB\u52A0\u8868"),Ft=M("\u8868\u9884\u8BBE\u5B57\u6BB5"),It=["onMouseenter","onMouseleave"],kt={class:"table-tree-title"},Rt=["title"],Tt={key:0,class:"table-tree-action-table"},At=["title"],xt=["onMouseenter","onMouseleave"],Et={class:"table-tree-title"},Dt=["title"],Ot={key:0,class:"table-tree-action"},$t=["title"],Lt={class:"components"},St={style:{display:"flex","align-items":"center",margin:"5px"}},Nt=pe(()=>m("i",{class:"fas fa-layer-group"},null,-1)),Vt={style:{"margin-left":"5px"}},Ut={class:"components-draggable"},qt={class:"components-item"},zt={class:"components-body"},Bt={class:"header"},Wt=M("(ctrl+s)"),jt={class:"drawing scrollbar",ref:"drawingRef"},Pt={style:{display:"none"}};function Gt(n,e,F,fe,be,X){const j=f("a-select-option"),P=f("a-select"),y=f("a-form-item"),R=f("a-input"),C=f("a-button"),V=f("a-form"),G=f("PlusOutlined"),T=f("a-menu-item"),$=f("a-popover"),U=f("EditOutlined"),H=f("question-circle-outlined"),S=f("DeleteOutlined"),J=f("a-popconfirm"),q=f("a-menu"),K=f("ReloadOutlined"),N=f("a-tooltip"),Y=f("a-dropdown"),E=f("a-layout-sider"),D=f("render"),Z=f("a-modal"),ee=f("a-space"),le=f("FolderOutlined"),ae=f("reload-outlined"),de=f("NodeIndexOutlined"),re=f("FileOutlined"),te=f("draggable"),ie=f("a-sub-menu"),z=f("a-tab-pane"),Q=f("a-tabs"),se=f("a-layout-content"),ue=f("a-layout");return g(),I(ue,{class:"layout"},{default:a(()=>[l(E,{width:130,class:"controller scrollbar"},{default:a(()=>[l(Y,{trigger:["contextmenu"]},{overlay:a(()=>[l(q,null,{default:a(()=>[l($,{trigger:"click",placement:"right"},{content:a(()=>[l(V,{"label-col":{span:7},model:n.newController,onFinish:e[3]||(e[3]=d=>n.createController(n.newController.title,n.newController.name,n.newController.table))},{default:a(()=>[l(y,{label:"\u6570\u636E\u8868",name:"table",required:""},{default:a(()=>[l(P,{value:n.newController.table,"onUpdate:value":e[0]||(e[0]=d=>n.newController.table=d),onChange:n.changeTable,"dropdown-match-select-width":400,showSearch:""},{default:a(()=>[(g(!0),x(W,null,B(n.tables,d=>(g(),I(j,{value:d.id},{default:a(()=>[M(w(d.tableName),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value","onChange"])]),_:1}),l(y,{label:"\u6807\u9898",name:"title",required:""},{default:a(()=>[l(R,{value:n.newController.title,"onUpdate:value":e[1]||(e[1]=d=>n.newController.title=d)},null,8,["value"])]),_:1}),l(y,{label:"\u540D\u79F0",name:"name",required:""},{default:a(()=>[l(R,{value:n.newController.name,"onUpdate:value":e[2]||(e[2]=d=>n.newController.name=d)},null,8,["value"])]),_:1}),l(y,{"wrapper-col":{offset:6},style:{"margin-bottom":"5px"}},{default:a(()=>[l(C,{type:"primary","html-type":"submit"},{default:a(()=>[Xe]),_:1})]),_:1})]),_:1},8,["model"])]),default:a(()=>[l(T,null,{icon:a(()=>[l(G)]),default:a(()=>[Ye]),_:1})]),_:1}),n.controllerIndex>-1?(g(),I($,{key:0,trigger:"click",placement:"right"},{content:a(()=>[l(V,{"label-col":{span:6},model:n.controller[n.controllerIndex],onFinish:n.updateController},{default:a(()=>[l(y,{name:"title",label:"\u6807\u9898",required:""},{default:a(()=>[l(R,{value:n.controller[n.controllerIndex].title,"onUpdate:value":e[4]||(e[4]=d=>n.controller[n.controllerIndex].title=d)},null,8,["value"])]),_:1}),l(y,{name:"name",label:"\u540D\u79F0",required:""},{default:a(()=>[l(R,{value:n.controller[n.controllerIndex].name,"onUpdate:value":e[5]||(e[5]=d=>n.controller[n.controllerIndex].name=d)},null,8,["value"])]),_:1}),l(y,{"wrapper-col":{offset:6},style:{"margin-bottom":"5px"}},{default:a(()=>[l(C,{type:"primary","html-type":"submit"},{default:a(()=>[Ze]),_:1})]),_:1})]),_:1},8,["model","onFinish"])]),default:a(()=>[l(T,null,{icon:a(()=>[l(U)]),default:a(()=>[et]),_:1})]),_:1})):O("",!0),n.controllerIndex>-1?(g(),I(J,{key:1,title:"\u786E\u8BA4\u5220\u9664\uFF1F",onConfirm:e[6]||(e[6]=d=>n.deleteController())},{icon:a(()=>[l(H,{style:{color:"red"}})]),default:a(()=>[l(T,null,{icon:a(()=>[l(S)]),default:a(()=>[tt]),_:1})]),_:1})):O("",!0)]),_:1})]),default:a(()=>[m("div",nt,[m("div",ot,[lt,l(C,{size:"small",shape:"circle",onClick:n.getController},{icon:a(()=>[l(K)]),_:1},8,["onClick"])]),m("ul",at,[(g(!0),x(W,null,B(n.controller,(d,c)=>(g(),x("li",{key:c,onContextmenu:L(A=>n.controllerIndex=c,["prevent"]),onClick:A=>{n.controllerIndex=c,n.getMethod(d.id)},class:oe(n.controllerIndex==c?"active":"")},[l(N,{placement:"bottom",mouseEnterDelay:1},{title:a(()=>[M(w(d.title),1)]),default:a(()=>[m("div",rt,w(d.title),1)]),_:2},1024),l(N,{placement:"bottom",mouseEnterDelay:1},{title:a(()=>[M(w(d.path),1)]),default:a(()=>[m("div",it,w(d.name),1)]),_:2},1024)],42,dt))),128))])])]),_:1})]),_:1}),l(E,{width:130,class:"controller scrollbar"},{default:a(()=>[l(Y,{trigger:["contextmenu"]},{overlay:a(()=>[l(q,null,{default:a(()=>[l($,{trigger:"click",placement:"right"},{content:a(()=>[l(V,{"label-col":{span:6},model:n.newMethod,onFinish:e[10]||(e[10]=d=>n.createMethod(n.newMethod.title,n.newMethod.name,n.newMethod.type))},{default:a(()=>[l(y,{label:"\u7C7B\u578B",name:"type",required:""},{default:a(()=>[l(P,{value:n.newMethod.type,"onUpdate:value":e[7]||(e[7]=d=>n.newMethod.type=d),options:n.methodTypes},null,8,["value","options"])]),_:1}),l(y,{label:"\u6807\u9898",name:"title",required:""},{default:a(()=>[l(R,{value:n.newMethod.title,"onUpdate:value":e[8]||(e[8]=d=>n.newMethod.title=d)},null,8,["value"])]),_:1}),l(y,{label:"\u540D\u79F0",name:"name",required:""},{default:a(()=>[l(R,{value:n.newMethod.name,"onUpdate:value":e[9]||(e[9]=d=>n.newMethod.name=d)},null,8,["value"])]),_:1}),l(y,{"wrapper-col":{offset:6},style:{"margin-bottom":"5px"}},{default:a(()=>[l(C,{type:"primary","html-type":"submit"},{default:a(()=>[st]),_:1})]),_:1})]),_:1},8,["model"])]),default:a(()=>[l(T,null,{icon:a(()=>[l(G)]),default:a(()=>[ut]),_:1})]),_:1}),n.methodIndex>-1?(g(),I($,{key:0,trigger:"click",placement:"right"},{content:a(()=>[l(V,{"label-col":{span:6},model:n.method[n.methodIndex],onFinish:n.updateMethod},{default:a(()=>[l(y,{name:"updateTitle",label:"\u6807\u9898",required:""},{default:a(()=>[l(R,{value:n.method[n.methodIndex].updateTitle,"onUpdate:value":e[11]||(e[11]=d=>n.method[n.methodIndex].updateTitle=d)},null,8,["value"])]),_:1}),l(y,{name:"updateName",label:"\u540D\u79F0",required:""},{default:a(()=>[l(R,{value:n.method[n.methodIndex].updateName,"onUpdate:value":e[12]||(e[12]=d=>n.method[n.methodIndex].updateName=d)},null,8,["value"])]),_:1}),l(y,{"wrapper-col":{offset:6},style:{"margin-bottom":"5px"}},{default:a(()=>[l(C,{type:"primary","html-type":"submit"},{default:a(()=>[ct]),_:1})]),_:1})]),_:1},8,["model","onFinish"])]),default:a(()=>[l(T,null,{icon:a(()=>[l(U)]),default:a(()=>[mt]),_:1})]),_:1})):O("",!0),n.methodIndex>-1?(g(),I(J,{key:1,title:"\u786E\u8BA4\u5220\u9664\uFF1F",onConfirm:e[13]||(e[13]=d=>n.deleteMethod())},{icon:a(()=>[l(H,{style:{color:"red"}})]),default:a(()=>[l(T,null,{icon:a(()=>[l(S)]),default:a(()=>[pt]),_:1})]),_:1})):O("",!0)]),_:1})]),default:a(()=>[m("div",ft,[m("div",bt,[ht,l(C,{size:"small",shape:"circle",onClick:e[14]||(e[14]=d=>n.getMethod(n.controller[n.controllerIndex].id))},{icon:a(()=>[l(K)]),_:1})]),m("ul",gt,[(g(!0),x(W,null,B(n.method,(d,c)=>(g(),x("li",{key:c,onContextmenu:L(A=>n.methodIndex=c,["prevent"]),onClick:A=>n.getRender(c),class:oe(n.methodIndex==c?"active":"")},[l(N,{placement:"bottom",mouseEnterDelay:1},{title:a(()=>[M(w(d.title),1)]),default:a(()=>[m("div",vt,w(d.title),1)]),_:2},1024),l(N,{placement:"bottom",mouseEnterDelay:1},{title:a(()=>[M(w(d.name),1)]),default:a(()=>[m("div",Mt,w(d.name),1)]),_:2},1024)],42,_t))),128))])])]),_:1})]),_:1}),l(E,{width:300,class:"scrollbar",ref:"dragRef"},{default:a(()=>[l(Q,{type:"card",class:"curd-tabs"},{default:a(()=>[l(z,{key:"1",tab:"\u6570\u636E\u5E93",style:{height:"100%"}},{default:a(()=>[l(Z,{visible:n.tableVisible,"onUpdate:visible":e[16]||(e[16]=d=>n.tableVisible=d),title:n.tableModalTitle,width:"1000px"},{footer:a(()=>[n.tableModalRender?(g(),I(D,{key:0,data:n.tableModalRender.footer},null,8,["data"])):O("",!0)]),default:a(()=>[l(D,{data:n.tableModalRender,onSuccess:e[15]||(e[15]=d=>n.onLoadTable(n.tableTreeNode))},null,8,["data"])]),_:1},8,["visible","title"]),m("div",Ct,[m("div",yt,[l(ee,{style:{"margin-bottom":"10px"}},{default:a(()=>[l(C,{onClick:n.addTable},{default:a(()=>[wt]),_:1},8,["onClick"]),l(C,{onClick:n.presetFields},{default:a(()=>[Ft]),_:1},8,["onClick"])]),_:1}),l(R,{value:n.searchTable,"onUpdate:value":e[17]||(e[17]=d=>n.searchTable=d),size:"small",placeholder:"\u641C\u7D22\u8868","allow-clear":""},null,8,["value"])]),l(q,{mode:"inline",class:"curd-table-tree",selectable:!1},{default:a(()=>[(g(!0),x(W,null,B(n.tableMenus,d=>(g(),I(ie,{key:d.id,onTitleClick:c=>n.onLoadTable(d)},{title:a(()=>[m("div",{onMouseenter:c=>n.tableMouseenter(c,d),onMouseleave:c=>n.tableMouseLeave(c,d)},[m("div",kt,[l(le),m("div",{class:"field-title",title:d.name},w(d.name),9,Rt),d.mouseenter?(g(),x("div",Tt,[l(C,{shape:"circle",size:"small",onClick:L(c=>n.onLoadTable(d),["stop"])},{icon:a(()=>[l(ae)]),_:2},1032,["onClick"]),l(C,{shape:"circle",size:"small",onClick:L(c=>n.addTableField(d.id),["stop"])},{icon:a(()=>[l(G)]),_:2},1032,["onClick"]),l(C,{shape:"circle",size:"small",onClick:L(c=>n.editTable(d.id),["stop"])},{icon:a(()=>[l(U)]),_:2},1032,["onClick"]),l(C,{shape:"circle",size:"small",onClick:L(c=>n.relationTable(d.id),["stop"])},{icon:a(()=>[l(de)]),_:2},1032,["onClick"]),l(C,{shape:"circle",size:"small",onClick:L(c=>n.deleteTable(d.id),["stop"])},{icon:a(()=>[l(S)]),_:2},1032,["onClick"])])):O("",!0)]),m("div",{class:"field-title-desc",title:d.comment},w(d.comment),9,At)],40,It)]),default:a(()=>[l(te,{style:{width:"100%"},list:d.children,onSort:n.onFieldSort,clone:n.onClone,move:n.onFieldMove,onEnd:n.onEnd,group:{pull:"clone",put:!1},"item-key":"id"},{item:a(({element:c})=>[m("div",{onMouseenter:A=>n.tableMouseenter(A,c),onMouseleave:A=>n.tableMouseLeave(A,c)},[(g(),I(T,{key:c.id},{default:a(()=>[m("div",Et,[l(re),m("div",{class:"field-title",title:c.name},w(c.name),9,Dt),c.mouseenter?(g(),x("div",Ot,[l(C,{shape:"circle",size:"small",onClick:L(A=>n.editTableField(d.id,c.field,d),["stop"])},{icon:a(()=>[l(U)]),_:2},1032,["onClick"]),l(C,{shape:"circle",size:"small",onClick:L(A=>n.deleteTableField(d.id,c.field,d),["stop"])},{icon:a(()=>[l(S)]),_:2},1032,["onClick"])])):O("",!0)]),m("div",{class:"field-title-desc",title:c.comment},w(c.comment),9,$t)]),_:2},1024))],40,xt)]),_:2},1032,["list","onSort","clone","move","onEnd"])]),_:2},1032,["onTitleClick"]))),128))]),_:1})])]),_:1}),l(z,{key:"2",tab:"\u8868\u5355\u8BBE\u8BA1",forceRender:""},{default:a(()=>[(g(!0),x(W,null,B(n.componentList,d=>(g(),x("div",Lt,[m("div",St,[Nt,m("div",Vt,w(d.label),1)]),m("div",Ut,[l(te,{list:d.options,sort:!1,clone:n.onClone,onEnd:n.onEnd,move:n.onCloneMove,"chosen-class":"chosen-class",group:{name:"components",pull:"clone",put:!1}},{item:a(({element:c})=>[m("div",qt,[m("div",zt,[m("i",{class:oe(c.icon)},null,2),M(" "+w(c.label),1)])])]),_:2},1032,["list","clone","onEnd","move"])])]))),256))]),_:1})]),_:1})]),_:1},512),l(se,{class:"main"},{default:a(()=>[m("div",Bt,[l(ee,null,{default:a(()=>[l(C,{onClick:n.dragSave},{default:a(()=>[m("span",{style:Pe(n.isSave?"":"color: red;")},"\u4FDD\u5B58",4),Wt]),_:1},8,["onClick"])]),_:1})]),m("div",jt,[l(D,{ref:d=>n.setRef(d),data:n.drawingMain.component},null,8,["data"])],512)]),_:1}),m("div",{class:"collapse",onClick:e[18]||(e[18]=d=>n.settingFormVisible=!n.settingFormVisible)},[m("i",{class:oe(n.settingFormVisible?"fas fa-angle-double-right":"fas fa-angle-double-left")},null,2)]),n.settingFormVisible?(g(),I(E,{key:0,width:360,class:"settingForm scrollbar"},{default:a(()=>[l(Q,{type:"card",class:"curd-tabs"},{default:a(()=>[n.settingForm?(g(),I(z,{key:"1",tab:"\u7EC4\u4EF6\u5C5E\u6027"},{default:a(()=>[l(D,{data:n.settingForm,onWatchModel:n.watchModel},null,8,["data","onWatchModel"])]),_:1})):O("",!0),l(z,{key:"2",tab:"\u5C5E\u6027",forceRender:""},{default:a(()=>[n.drawingMain.component?(g(),I(D,{key:0,data:n.drawingMain.component.attribute.drawingForm,onWatchModel:n.watchModel},null,8,["data","onWatchModel"])):O("",!0)]),_:1})]),_:1})]),_:1})):O("",!0),m("div",Pt,[(g(!0),x(W,null,B(n.settingFormList,d=>(g(),I(D,{data:d,onWatchModel:n.watchModel},null,8,["data","onWatchModel"]))),256))])]),_:1})}var Nn=Se(Qe,[["render",Gt],["__scopeId","data-v-b92e563e"]]);export{Nn as default};

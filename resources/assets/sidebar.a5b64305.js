import"./vue.db505ee4.js";import{u as R}from"./use-http.a6f50943.js";import{_ as W,c as q,t as G}from"./index.56576f2d.js";import{r as v,w as J,aW as p,aR as l,ar as m,bd as y,as as c,c as b,au as K,u as f,at as k,S as V,ai as F}from"./@vue.cb43a243.js";import"./@babel.6cd0804c.js";import"./regenerator-runtime.8e24db72.js";import"./js-md5.5179c6be.js";import"./vue-router.a08742b9.js";import"./js-cookie.31874410.js";import"./ant-design-vue.6b10f349.js";import"./@ant-design.bcfb08ae.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.38e390ea.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.c9cf1bdb.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.81e70e6d.js";import"./vue-demi.5fb18120.js";import"./axios.e3200588.js";/* empty css                     */import"./sortablejs.412b554c.js";import"./clipboard.099d05c9.js";import"./markdown-it.80c3a67b.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.c97a8414.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.86f7507c.js";const Q={class:"scrollbar"},X={key:0,class:"flex"},Y={style:{color:"#f50"}},Z={key:0,class:"action"},$={key:1,class:"flex"},ee={key:0,class:"action"},te={name:"ExSidebar",inheritAttrs:!1},ae=Object.assign(te,{props:{hideAll:Boolean,hideAdd:Boolean,hideEdit:Boolean,hideDel:Boolean,hideFilter:Boolean,hideTools:Boolean,isTree:Boolean,tools:[Object,Boolean],value:[String,Number],sourceList:{type:Array,default:[]},default:{type:[String,Number],default:void 0},field:{type:String,default:"group_id"},selectedField:String,fieldNames:Object,url:String,params:{type:Object,default:{}}},emits:["update:value"],setup(d,{emit:x}){const o=d,{loading:oe,http:j}=R();let S,h=o.fieldNames.children,r=o.fieldNames.key,i=o.fieldNames.title;o.default!==void 0&&x("update:value",o.default);const N=v([o.default]),s=v(""),g=v(-1),B=v(o.sourceList.map(t=>t[r])),O=v(!0),D=v(T(o.sourceList)),E=(t,e)=>{for(let n=0;n<e.length;n++){const u=e[n];u[h]&&(u[h].some(A=>A[r]===t)?S=u[r]:E(t,u[h])&&(S=E(t,u[h])))}return S},C=t=>{B.value=t,O.value=!1};J(s,t=>{B.value=o.sourceList.map(e=>e[i].indexOf(t)>-1?E(e[r],D.value):null).filter((e,n,u)=>e&&u.indexOf(e)===n),s.value=t,O.value=!0});const L=(t,e)=>{if(e.selected){const n=t[0];o.selectedField?x("update:value",e.node[o.selectedField]):x("update:value",n)}else x("update:value",null)};function T(t){if(o.isTree&&(t=q(t,r,o.fieldNames.pid,h)),t.length==0&&(N.value=[""],x("update:value","")),!o.hideAll){const e={};e[r]="",e[i]=G("Sidebar.all"),e.ex_admin_render={name:"html",attribute:{"data-tag":"span"},content:{default:[e[i]]}},t.unshift(e)}return t}function _(){j({url:o.url,method:"post",data:o.params}).then(t=>{D.value=T(t)})}function M(t){let e=t.node[r];e&&(g.value=e)}function w(){g.value=-1}return(t,e)=>{const n=p("render"),u=p("reload-outlined"),A=p("a-button"),z=p("a-space"),I=p("search-outlined"),P=p("a-input"),U=p("a-tree"),H=p("a-card");return l(),m(H,{style:{height:"100%"},bodyStyle:{padding:"10px",height:"100%",display:"flex",flexDirection:"column"}},{default:y(()=>[d.hideTools?c("",!0):(l(),m(z,{key:0,style:{"margin-bottom":"10px"},size:10},{default:y(()=>[d.hideAdd?c("",!0):(l(),m(n,{key:0,data:d.tools.add,onSuccess:_},null,8,["data"])),b(A,{shape:"circle",size:"small",onClick:_},{icon:y(()=>[b(u)]),_:1})]),_:1})),d.hideFilter?c("",!0):(l(),m(P,{key:1,value:s.value,"onUpdate:value":e[0]||(e[0]=a=>s.value=a),style:{"margin-bottom":"8px"}},{prefix:y(()=>[b(I,{style:{color:"#c0c4cc"}})]),_:1},8,["value"])),K("div",Q,[b(U,{"expanded-keys":B.value,"tree-data":D.value,"auto-expand-parent":O.value,fieldNames:d.fieldNames,onExpand:C,onSelect:L,onMouseenter:M,onMouseleave:w,"block-node":"",selectedKeys:N.value,"onUpdate:selectedKeys":e[1]||(e[1]=a=>N.value=a)},{title:y(a=>[s.value&&a[f(i)]&&a[f(i)].indexOf(s.value)>-1?(l(),k("span",X,[K("span",null,[V(F(a[f(i)].substr(0,a[f(i)].indexOf(s.value)))+" ",1),K("span",Y,F(s.value),1),V(" "+F(a[f(i)].substr(a[f(i)].indexOf(s.value)+s.value.length)),1)]),g.value==a[f(r)]&&(a.ex_admin_edit||a.ex_admin_delete)?(l(),k("span",Z,[d.hideEdit?c("",!0):(l(),m(n,{key:0,data:a.ex_admin_edit,onSuccess:_},null,8,["data"])),d.hideDel?c("",!0):(l(),m(n,{key:1,data:a.ex_admin_delete,onSuccess:_},null,8,["data"]))])):c("",!0)])):(l(),k("span",$,[b(n,{data:a.ex_admin_render},null,8,["data"]),g.value==a[f(r)]&&(a.ex_admin_edit||a.ex_admin_delete)?(l(),k("span",ee,[d.hideEdit?c("",!0):(l(),m(n,{key:0,data:a.ex_admin_edit,onSuccess:_},null,8,["data"])),d.hideDel?c("",!0):(l(),m(n,{key:1,data:a.ex_admin_delete,onSuccess:_},null,8,["data"]))])):c("",!0)]))]),_:1},8,["expanded-keys","tree-data","auto-expand-parent","fieldNames","selectedKeys"])])]),_:1})}}});var qe=W(ae,[["__scopeId","data-v-5bf1faca"]]);export{qe as default};

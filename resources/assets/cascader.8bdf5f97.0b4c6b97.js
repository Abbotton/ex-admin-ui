import{an as g,ay as y,t as l,aM as V,as as S,aN as E,e as A,d as N}from"./dynamicTag.98ddbc91.js";import{h as j}from"./remoteOptions.98ea7fdb.15a62331.js";import"./vue.4c5758a0.js";import"./@babel.dd651e2b.js";import"./regenerator-runtime.8e24db72.js";import"./@vue.87afd1fa.js";import"./index.97f9c525.js";import"./js-md5.3cdd41c4.js";import"./vue-router.9a2c52dc.js";import"./js-cookie.31874410.js";import"./ant-design-vue.e954adc4.js";import"./@ant-design.8c82b126.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.0743a87f.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.28c974ad.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.67682d36.js";import"./vue-demi.24ed2461.js";import"./axios.e3200588.js";/* empty css                     */import"./sortablejs.412b554c.js";import"./clipboard.89482ba1.js";import"./markdown-it.39ce48f9.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.169105cf.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.52338b19.js";var fe=g({name:"ExCascader",props:{value:[String,Number,Array],options:Array,remote:Object,cascaderValue:{type:Array,default:[]},single:Boolean},setup(r,o){const p=y.useInjectFormItemContext(),m=l(r,"value",o.emit),s=l(r,"options",o.emit),{remoteOptionsDebounce:h,remoteOptions:u}=j(r,s),i=o.attrs.fieldNames||{label:"label",value:"value",children:"children",pid:"pid"},c=l(r,"cascaderValue",o.emit);function v(e){if(e===void 0)m.value=o.attrs.multiple?[]:null;else{let t=JSON.parse(JSON.stringify(e));o.attrs.multiple?m.value=f(t):m.value=t.pop()}p.onFieldChange()}r.single&&u(m.value).then(e=>{c.value=b(m.value)});function f(e){let t=[];return e.forEach(a=>{const n=a.pop();t=t.concat(O(n))}),A.exports.uniq(t)}function O(e){const t=[e],a=N(r.options,i.value,e,-1,i.children);if(a&&a[i.children])a[i.children].forEach(n=>{d(n,t)});else return[e];return t}function d(e,t=[]){return t.push(e[i.value]),e[i.children]&&e[i.children].forEach(a=>{d(a,t)}),t}function b(e){Array.isArray(e)||(e?e=[e]:e=[]);const t=[];return e.forEach(a=>{t.push(V(s.value,a,i.value,i.pid,i.children).map(n=>n[i.value]))}),o.attrs.changeOnSelect?t:t.pop()}return{options:s,remoteOptionsDebounce:h,remoteOptions:u,cascaderValue:c,updateValue:v}},render(r){let o=Object.assign({options:this.options},r.$attrs,{value:r.cascaderValue,"onUpdate:value":p=>{r.cascaderValue=p,this.updateValue(p)}});return this.remote&&(o.onSearch=p=>{this.remoteOptionsDebounce(p)},o.showSearch=!0),S(E,o,r.$slots)}});export{fe as default};

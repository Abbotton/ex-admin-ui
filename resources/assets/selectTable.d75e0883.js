import{_ as O,t as j}from"./index.9a3c7168.js";import"./vue.f169bc0e.js";import{u as U}from"./use-http.3a41e54b.js";import{d as B,r as s,w as V,Y as m,Z as f,a0 as b,c as o,$ as i,I as S,a4 as p,ab as N,a1 as w,a5 as A,a3 as P,F as E}from"./@vue.a2bdcbc4.js";import"./vue-router.0de480eb.js";import"./js-md5.216a9fc2.js";import"./@babel.7a426183.js";import"./regenerator-runtime.59ce731c.js";import"./spark-md5.2cc5764b.js";import"./axios.e3200588.js";import"./ant-design-vue.e653cb26.js";import"./@ant-design.594a5492.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.8a2ffed6.js";import"./dayjs.76d34158.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./js-cookie.31874410.js";/* empty css                     */import"./lodash.5fa5cd01.js";import"./clipboard.76283100.js";const z=B({name:"ExSelectTable",props:{value:[String,Array,Number],params:Object,gridUrl:String,submitUrl:String,remoteParams:{type:Object,default:{}},submitParams:{type:Object,default:{}},custom:Boolean,multiple:Boolean},inheritAttrs:!1,emits:["update:value"],setup(e,a){const g=s(!0),r=s(e.value),d=s(!1),y=s([]),c=s(null),t=s(e.value||[]),u=s("");Array.isArray(t.value)||(t.value=[t.value]);const{loading:_,http:h}=U(),k={x:"max-content",y:window.innerHeight/2};T(),V(()=>e.value,l=>{r.value=l}),V(r,l=>{e.multiple?t.value=l:l?t.value=[l]:t.value=[],a.emit("update:value",l)});function n(){u.value=null,d.value=!0,h({url:e.gridUrl,params:e.params}).then(l=>{Object.assign(l.attribute.params,e.params),u.value=l})}function T(){const{http:l}=U();l({url:e.submitUrl,params:Object.assign(e.submitParams,{ex_eadmin_select_id:t.value})}).then($=>{e.custom?c.value=$.data:y.value=$.data,d.value=!1;const C=[];if(t.value.forEach(v=>{C.push(v)}),e.multiple)r.value=C;else{let v=C.pop();typeof v!="undefined"&&(r.value=v)}}).finally(()=>{g.value=!1})}return{trans:j,selectLoading:g,loading:_,submit:T,open:n,content:u,options:y,selectValue:r,selection:t,visible:d,height:k,customRender:c}}}),F={key:0},H={key:1},I={key:0};function R(e,a,g,r,d,y){const c=m("plus-outlined"),t=m("a-button"),u=m("render"),_=m("a-select"),h=m("a-form-item-rest"),k=m("a-modal");return f(),b(E,null,[e.custom?(f(),b("div",F,[o(t,{size:"small",style:{"margin-bottom":"10px"},onClick:e.open,disabled:e.$attrs.disabled},{icon:i(()=>[o(c)]),default:i(()=>[S(" "+p(e.trans("SelectTable.select")),1)]),_:1},8,["onClick","disabled"]),o(u,{data:e.customRender},null,8,["data"])])):(f(),b("div",H,[o(_,N(e.$attrs,{value:e.selectValue,"onUpdate:value":a[0]||(a[0]=n=>e.selectValue=n),options:e.options,open:!1,onClick:e.open}),null,16,["value","options","onClick"])])),o(k,{visible:e.visible,"onUpdate:visible":a[3]||(a[3]=n=>e.visible=n),width:"80%",destroyOnClose:"",bodyStyle:{padding:0,paddingTop:"40px"}},{footer:i(()=>[w("div",{class:P(e.multiple&&e.selection.length>0?"footer":"")},[e.multiple&&e.selection.length>0?(f(),b("div",I,p(e.trans("SelectTable.selected"))+": "+p(e.selection.length),1)):A("",!0),w("div",null,[o(t,{type:"primary",onClick:e.submit},{default:i(()=>[S(p(e.trans("SelectTable.confirm")),1)]),_:1},8,["onClick"]),o(t,{onClick:a[2]||(a[2]=n=>e.visible=!1)},{default:i(()=>[S(p(e.trans("SelectTable.cancel")),1)]),_:1})])],2)]),default:i(()=>[o(h,null,{default:i(()=>[o(u,{data:e.content,selection:e.selection,"onUpdate:selection":a[1]||(a[1]=n=>e.selection=n),scroll:e.height,"selection-type":e.multiple?"checkbox":"radio"},null,8,["data","selection","scroll","selection-type"])]),_:1})]),_:1},8,["visible"])],64)}var de=O(z,[["render",R],["__scopeId","data-v-8f4a3056"]]);export{de as default};

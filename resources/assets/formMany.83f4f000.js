var H=Object.defineProperty;var E=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var I=(t,i,n)=>i in t?H(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,R=(t,i)=>{for(var n in i||(i={}))J.call(i,n)&&I(t,n,i[n]);if(E)for(var n of E(i))K.call(i,n)&&I(t,n,i[n]);return t};import"./vue.303f3630.js";import{b as Q}from"./@vueuse.82aa2673.js";import{S as X}from"./sortablejs.412b554c.js";import{_ as Y,A as x,t as u,f as P}from"./index.b1ed960a.js";import{r as j,n as Z,a as ee,aW as p,aR as o,at as h,ar as s,bd as l,R as d,ai as c,as as m,c as g,G as O,u as e,au as te,aV as ae,W as oe,M as z,P as B}from"./@vue.cfb5b4bf.js";import"./@babel.6cd0804c.js";import"./regenerator-runtime.8e24db72.js";import"./vue-demi.0d8c46ec.js";import"./js-md5.5179c6be.js";import"./vue-router.459d6f87.js";import"./js-cookie.31874410.js";import"./ant-design-vue.e071a89f.js";import"./@ant-design.6903cb45.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.38e390ea.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./lodash.c9cf1bdb.js";import"./spark-md5.2cc5764b.js";import"./axios.e3200588.js";/* empty css                     */import"./clipboard.099d05c9.js";import"./markdown-it.20180ffc.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.c97a8414.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.f6189e82.js";const le={class:"hasMany"},ne={key:1},re={key:0,style:{"margin-top":"5px"}},ie={key:2},se={name:"ExFormMany"},de=Object.assign(se,{props:{value:{type:Array,default:[]},limit:{type:Number,default:0},disabled:Boolean,drag:Boolean,itemData:Object,table:Boolean,field:String,title:String,columns:Array,recursion:{type:Array,default:[]}},emits:["update:value"],setup(t,{emit:i}){const n=t,C=j(-1),M=j(),a=Q(n,"value",i);a.value.forEach((r,_)=>(r.ex_admin_id=_+1,r));let w=null;n.drag&&Z(()=>{let r;n.table?r=M.value.table.$el.querySelectorAll(".ant-table-content > table > tbody")[0]:r=M.value,w=X.create(r,{animation:1e3,onEnd:_=>{const b=a.value.splice(_.oldIndex,1)[0];a.value.splice(_.newIndex,0,b)}})}),ee(r=>{w&&w.destroy()});function F(){const r=R({},n.itemData);r.ex_admin_id=a.length+1,a.value.push(r)}function S(r){a.value.splice(r,1)}function A(){a.value.splice(0)}function T(r,_){return{onMouseenter:b=>{C.value=_},onMouseleave:b=>{C.value=-1}}}return(r,_)=>{const b=p("a-divider"),V=p("render"),U=p("caret-up-filled"),W=p("caret-down-filled"),q=p("close-circle-filled"),G=p("a-space"),L=p("a-table"),v=p("a-button"),D=p("a-form-item");return o(),h("div",le,[t.title?(o(),s(b,{key:0,orientation:"left"},{default:l(()=>[d(c(t.title),1)]),_:1})):m("",!0),t.table?(o(),h("div",ne,[g(L,{"row-key":"ex_admin_id",ref_key:"drag",ref:M,"data-source":e(a),bordered:"",columns:t.columns,size:"small",class:"table",pagination:!1,"custom-row":T},{headerCell:l(({column:k})=>[g(V,{data:k.header},null,8,["data"])]),bodyCell:l(({column:k,record:f,text:$,index:y})=>[k.type=="action"?(o(),s(G,{key:0},{default:l(()=>[t.disabled?m("",!0):(o(),h(O,{key:0},[C.value==y&&e(a).length>1&&y>0?(o(),s(U,{key:0,onClick:N=>e(x)(e(a),y)},{default:l(()=>[d(c(e(u)("FormMany.up")),1)]),_:2},1032,["onClick"])):m("",!0),C.value==y&&e(a).length>1&&y<e(a).length-1?(o(),s(W,{key:1,onClick:N=>e(P)(e(a),y)},{default:l(()=>[d(c(e(u)("FormMany.down")),1)]),_:2},1032,["onClick"])):m("",!0),C.value==y&&e(a).length>0?(o(),s(q,{key:2,style:{color:"red"},type:"dashed",onClick:N=>S(y)},{default:l(()=>[d(c(e(u)("FormMany.remove")),1)]),_:2},1032,["onClick"])):m("",!0)],64))]),_:2},1024)):(o(),s(V,{key:1,scopeProp:{$index:y,field:t.field,row:f,recursion:t.recursion},data:k.component},null,8,["scopeProp","data"]))]),_:1},8,["data-source","columns"]),t.disabled?m("",!0):(o(),h("div",re,[t.limit==0||t.limit>e(a).length?(o(),s(v,{key:0,size:"small",type:"dashed",onClick:F},{default:l(()=>[d(c(e(u)("FormMany.add")),1)]),_:1})):m("",!0),t.limit==0||t.limit>e(a).length?(o(),s(v,{key:1,size:"small",type:"danger",onClick:A},{default:l(()=>[d(c(e(u)("FormMany.clear")),1)]),_:1})):m("",!0)]))])):(o(),h("div",ie,[te("div",{ref_key:"drag",ref:M},[(o(!0),h(O,null,ae(e(a),(k,f)=>(o(),h("div",{key:k.ex_admin_id},[oe(r.$slots,"default",{$index:f,field:t.field,row:k,recursion:t.recursion},void 0,!0),t.disabled?m("",!0):(o(),s(D,{key:0,label:" ",colon:!1},{default:l(()=>[e(a).length-1==f&&(t.limit==0||t.limit>e(a).length)?(o(),s(v,{key:0,size:"small",type:"dashed",onClick:F},{default:l(()=>[d(c(e(u)("FormMany.add")),1)]),_:1})):m("",!0),z(g(v,{size:"small",type:"dashed",onClick:$=>S(f)},{default:l(()=>[d(c(e(u)("FormMany.remove")),1)]),_:2},1032,["onClick"]),[[B,e(a).length>0]]),z(g(v,{size:"small",onClick:$=>e(x)(e(a),f)},{default:l(()=>[d(c(e(u)("FormMany.up")),1)]),_:2},1032,["onClick"]),[[B,e(a).length>1&&f>0]]),z(g(v,{size:"small",onClick:$=>e(P)(e(a),f)},{default:l(()=>[d(c(e(u)("FormMany.down")),1)]),_:2},1032,["onClick"]),[[B,e(a).length>1&&f<e(a).length-1]]),e(a).length-1==f&&(t.limit==0||t.limit>e(a).length)?(o(),s(v,{key:1,size:"small",type:"dashed",onClick:A},{default:l(()=>[d(c(e(u)("FormMany.clear")),1)]),_:1})):m("",!0)]),_:2},1024)),g(b)]))),128))],512),e(a).length==0&&!t.disabled?(o(),s(D,{key:0,label:" ",colon:!1},{default:l(()=>[g(v,{size:"small",type:"dashed",onClick:F},{default:l(()=>[d(c(e(u)("FormMany.add")),1)]),_:1})]),_:1})):m("",!0)]))])}}});var Ye=Y(de,[["__scopeId","data-v-5b9e5398"]]);export{Ye as default};
